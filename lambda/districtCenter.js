!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=818)}({156:function(e,t){e.exports=require("dns")},192:function(e,t){e.exports=require("tls")},207:function(e,t){e.exports=require("url")},208:function(e,t,r){(function(n){var i=r(58),s=r(75),o=r(331),a=s.join,u=s.dirname,c=i.accessSync&&function(e){try{i.accessSync(e)}catch(e){return!1}return!0}||i.existsSync||s.existsSync,h={arrow:process.env.NODE_BINDINGS_ARROW||" â†’ ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};e.exports=t=function(e){"string"==typeof e?e={bindings:e}:e||(e={}),Object.keys(h).map((function(t){t in e||(e[t]=h[t])})),e.module_root||(e.module_root=t.getRoot(t.getFileName())),".node"!=s.extname(e.bindings)&&(e.bindings+=".node");for(var r,n,i,o=require,u=[],c=0,l=e.try.length;c<l;c++){r=a.apply(null,e.try[c].map((function(t){return e[t]||t}))),u.push(r);try{return n=e.path?o.resolve(r):o(r),e.path||(n.path=r),n}catch(e){if("MODULE_NOT_FOUND"!==e.code&&"QUALIFIED_PATH_RESOLUTION_FAILED"!==e.code&&!/not find/i.test(e.message))throw e}}throw(i=new Error("Could not locate the bindings file. Tried:\n"+u.map((function(t){return e.arrow+t})).join("\n"))).tries=u,i},t.getFileName=function(e){var t,r=Error.prepareStackTrace,i=Error.stackTraceLimit,s={};Error.stackTraceLimit=10,Error.prepareStackTrace=function(r,i){for(var s=0,o=i.length;s<o;s++)if((t=i[s].getFileName())!==n){if(!e)return;if(t!==e)return}},Error.captureStackTrace(s),Error.prepareStackTrace=r,Error.stackTraceLimit=i;return 0===t.indexOf("file://")&&(t=o(t)),t},t.getRoot=function(e){for(var t,r=u(e);;){if("."===r&&(r=process.cwd()),c(a(r,"package.json"))||c(a(r,"node_modules")))return r;if(t===r)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=r,r=a(r,"..")}}}).call(this,"/index.js")},328:function(e,t,r){e.exports=r(592)},329:function(e,t){e.exports=require("net")},330:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},331:function(e,t,r){var n=r(75).sep||"/";e.exports=function(e){if("string"!=typeof e||e.length<=7||"file://"!=e.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");var t=decodeURI(e.substring(7)),r=t.indexOf("/"),i=t.substring(0,r),s=t.substring(r+1);"localhost"==i&&(i="");i&&(i=n+n+i);s=s.replace(/^(.+)\|/,"$1:"),"\\"==n&&(s=s.replace(/\//g,"\\"));/^.+\:/.test(s)||(s=n+s);return i+s}},34:function(e,t){e.exports=require("stream")},46:function(e,t){e.exports=require("crypto")},5:function(e,t){e.exports=require("util")},58:function(e,t){e.exports=require("fs")},590:function(e,t){function r(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,u,"next",e)}function u(e){r(o,i,s,a,u,"throw",e)}a(void 0)}))}}},592:function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function a(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,s=Object.create(i.prototype),o=new S(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(i,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw s;return C()}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var a=_(o,r);if(a){if(a===c)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var h=u(e,t,r);if("normal"===h.type){if(n=r.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(n="completed",r.method="throw",r.arg=h.arg)}}}(e,r,o),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=a;var c={};function h(){}function l(){}function p(){}var f={};f[i]=function(){return this};var d=Object.getPrototypeOf,m=d&&d(d(E([])));m&&m!==t&&r.call(m,i)&&(f=m);var y=p.prototype=h.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function v(e){var t;this._invoke=function(n,i){function s(){return new Promise((function(t,s){!function t(n,i,s,o){var a=u(e[n],e,i);if("throw"!==a.type){var c=a.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?Promise.resolve(h.__await).then((function(e){t("next",e,s,o)}),(function(e){t("throw",e,s,o)})):Promise.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return t("throw",e,s,o)}))}o(a.arg)}(n,i,t,s)}))}return t=t?t.then(s,s):s()}}function _(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:C}}function C(){return{value:void 0,done:!0}}return l.prototype=y.constructor=p,p.constructor=l,p[o]=l.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(v.prototype),v.prototype[s]=function(){return this},e.AsyncIterator=v,e.async=function(t,r,n,i){var s=new v(a(t,r,n,i));return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},g(y),y[o]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),b(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;b(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},74:function(e,t){e.exports=require("assert")},75:function(e,t){e.exports=require("path")},797:function(e,t,r){"use strict";e.exports={host:"localhost",user:"win32"===process.platform?process.env.USERNAME:process.env.USER,database:"win32"===process.platform?process.env.USERNAME:process.env.USER,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var n=r(798),i=n.getTypeParser(20,"text"),s=n.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",(function(e){n.setTypeParser(20,"text",e?n.getTypeParser(23,"text"):i),n.setTypeParser(1016,"text",e?n.getTypeParser(1007,"text"):s)}))},798:function(e,t,r){var n=r(820),i=r(822),s=r(805),o=r(823);t.getTypeParser=function(e,t){if(!a[t=t||"text"])return u;return a[t][e]||u},t.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text");a[t][e]=r},t.arrayParser=s,t.builtins=o;var a={text:{},binary:{}};function u(e){return String(e)}n.init((function(e,t){a.text[e]=t})),i.init((function(e,t){a.binary[e]=t}))},8:function(e,t){e.exports=require("events")},801:function(e,t,r){"use strict";const n=r(46),i=r(797);var s=function(e,t){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){var r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?i.parseInputDatesAsUTC?function(e){var t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);var n=o(t,4)+"-"+o(e.getUTCMonth()+1,2)+"-"+o(e.getUTCDate(),2)+"T"+o(e.getUTCHours(),2)+":"+o(e.getUTCMinutes(),2)+":"+o(e.getUTCSeconds(),2)+"."+o(e.getUTCMilliseconds(),3);n+="+00:00",r&&(n+=" BC");return n}(e):function(e){var t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var i=o(r,4)+"-"+o(e.getMonth()+1,2)+"-"+o(e.getDate(),2)+"T"+o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":"+o(e.getSeconds(),2)+"."+o(e.getMilliseconds(),3);t<0?(i+="-",t*=-1):i+="+";i+=o(Math.floor(t/60),2)+":"+o(t%60,2),n&&(i+=" BC");return i}(e):Array.isArray(e)?function e(t){for(var r="{",n=0;n<t.length;n++)n>0&&(r+=","),null===t[n]||void 0===t[n]?r+="NULL":Array.isArray(t[n])?r+=e(t[n]):t[n]instanceof Buffer?r+="\\\\x"+t[n].toString("hex"):r+='"'+s(t[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"';return r+="}"}(e):null==e?null:"object"==typeof e?function(e,t){if(e&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),s(e.toPostgres(s),t)}return JSON.stringify(e)}(e,t):e.toString()};function o(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}const a=function(e){return n.createHash("md5").update(e,"utf-8").digest("hex")};e.exports={prepareValue:function(e){return s(e)},normalizeQueryConfig:function(e,t,r){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),r&&(e.callback=r),e},postgresMd5PasswordHash:function(e,t,r){var n=a(t+e);return"md5"+a(Buffer.concat([Buffer.from(n),r]))},md5:a}},802:function(e,t,r){"use strict";const n=r(5),i=new Map;e.exports=(e,t)=>{let r=i.get(t);void 0===r&&(r=n.deprecate(()=>{},e),i.set(t,r)),r()}},803:function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(5),Client=__webpack_require__(819),defaults=__webpack_require__(797),Connection=__webpack_require__(813),Pool=__webpack_require__(838);const checkConstructor=__webpack_require__(812),poolFactory=Client=>{var BoundPool=function(options){checkConstructor("pg.Pool","PG-POOL-NEW",()=>eval("new.target"));var config=Object.assign({Client:Client},options);return new Pool(config)};return util.inherits(BoundPool,Pool),BoundPool};var PG=function(e){this.defaults=defaults,this.Client=e,this.Query=this.Client.Query,this.Pool=poolFactory(this.Client),this._pools=[],this.Connection=Connection,this.types=__webpack_require__(798)};void 0!==process.env.NODE_PG_FORCE_NATIVE?module.exports=new PG(__webpack_require__(815)):(module.exports=new PG(Client),module.exports.__defineGetter__("native",(function(){delete module.exports.native;var e=null;try{e=new PG(__webpack_require__(815))}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e;console.error(e.message)}return module.exports.native=e,e})))},804:function(e,t,r){"use strict";t.parse=function(e,t){return new n(e,t).parse()};class n{constructor(e,t){this.source=e,this.transform=t||i,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof();){if("="===this.nextCharacter().value)break}}parse(e){var t,r,i;for(this.consumeDimensions();!this.isEof();)if("{"!==(t=this.nextCharacter()).value||i){if("}"!==t.value||i)'"'!==t.value||t.escaped?","!==t.value||i?this.record(t.value):this.newEntry():(i&&this.newEntry(!0),i=!i);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(r=new n(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}}function i(e){return e}},805:function(e,t,r){var n=r(804);e.exports={create:function(e,t){return{parse:function(){return n.parse(e,t)}}}}},806:function(e,t,r){"use strict";var n=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,i=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,s=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,o=/^-?infinity$/;function a(e){return-(e-1)}function u(e){return e>=0&&e<100}e.exports=function(e){if(o.test(e))return Number(e.replace("i","I"));var t=n.exec(e);if(!t)return function(e){var t=i.exec(e);if(!t)return;var r=parseInt(t[1],10);t[4]&&(r=a(r));var n=parseInt(t[2],10)-1,s=t[3],o=new Date(r,n,s);u(r)&&o.setFullYear(r);return o}(e)||null;var r=!!t[8],c=parseInt(t[1],10);r&&(c=a(c));var h,l=parseInt(t[2],10)-1,p=t[3],f=parseInt(t[4],10),d=parseInt(t[5],10),m=parseInt(t[6],10),y=t[7];y=y?1e3*parseFloat(y):0;var g=function(e){var t=s.exec(e.split(" ")[1]);if(!t)return;var r=t[1];if("Z"===r)return 0;var n="-"===r?-1:1;return(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*n*1e3}(e);return null!=g?(h=new Date(Date.UTC(c,l,p,f,d,m,y)),u(c)&&h.setUTCFullYear(c),h.setTime(h.getTime()-g)):(h=new Date(c,l,p,f,d,m,y),u(c)&&h.setFullYear(c)),h}},807:function(e,t,r){"use strict";var n=r(821);function i(e){if(!(this instanceof i))return new i(e);n(this,function(e){if(!e)return{};var t=c.exec(e),r="-"===t[8];return Object.keys(h).reduce((function(e,n){var i,s,o=t[h[n]];return o&&(o="milliseconds"===n?(s=(i=o)+"000000".slice(i.length),parseInt(s,10)/1e3):parseInt(o,10))?(r&&~l.indexOf(n)&&(o*=-1),e[n]=o,e):e}),{})}(e))}e.exports=i;var s=["seconds","minutes","hours","days","months","years"];i.prototype.toPostgres=function(){var e=s.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),0===e.length?"0":e.map((function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e}),this).join(" ")};var o={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},a=["years","months","days"],u=["hours","minutes","seconds"];i.prototype.toISOString=i.prototype.toISO=function(){return"P"+a.map(e,this).join("")+"T"+u.map(e,this).join("");function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+o[e]}};var c=new RegExp(["([+-]?\\d+)\\s+years?","([+-]?\\d+)\\s+mons?","([+-]?\\d+)\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map((function(e){return"("+e+")?"})).join("\\s*")),h={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},l=["hours","minutes","seconds","milliseconds"]},808:function(e,t,r){"use strict";e.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var t="",r=0;r<e.length;)if("\\"!==e[r])t+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))t+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var n=1;r+n<e.length&&"\\"===e[r+n];)n++;for(var i=0;i<Math.floor(n/2);++i)t+="\\";r+=2*Math.floor(n/2)}return new Buffer(t,"binary")}},809:function(e,t,r){"use strict";e.exports=function(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(0===r),r=1+~r>>>0,n="-");var i,s,o,a,u,c,h="";if(i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+h;for(a="",u=6-o.length,c=0;c<u;c++)a+="0";if(h=a+o+h,i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+h;for(a="",u=6-o.length,c=0;c<u;c++)a+="0";if(h=a+o+h,i=t%1e6,t=t/1e6>>>0,o=""+((s=4294967296*i+r)-1e6*(r=s/1e6>>>0)),0===r&&0===t)return n+o+h;for(a="",u=6-o.length,c=0;c<u;c++)a+="0";return h=a+o+h,n+(o=""+(s=4294967296*(i=t%1e6)+r)%1e6)+h}},810:function(e,t,r){"use strict";var n=r(798);function i(e){this._types=e||n,this.text={},this.binary={}}i.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},i.prototype.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),this.getOverrides(t)[e]=r},i.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},e.exports=i},811:function(e,t,r){"use strict";var n=r(156),i=r(797),s=r(830).parse,o=function(e,t,r){return void 0===r?r=process.env["PG"+e.toUpperCase()]:!1===r||(r=process.env[r]),t[e]||r||i[e]},a=function(e){(e="string"==typeof e?s(e):e||{}).connectionString&&(e=Object.assign({},e,s(e.connectionString))),this.user=o("user",e),this.database=o("database",e),this.port=parseInt(o("port",e),10),this.host=o("host",e),this.password=o("password",e),this.binary=o("binary",e),this.ssl=void 0===e.ssl?function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0}return i.ssl}():e.ssl,this.client_encoding=o("client_encoding",e),this.replication=o("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=o("application_name",e,"PGAPPNAME"),this.fallback_application_name=o("fallback_application_name",e,!1),this.statement_timeout=o("statement_timeout",e,!1),this.idle_in_transaction_session_timeout=o("idle_in_transaction_session_timeout",e,!1),this.query_timeout=o("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))},u=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},c=function(e,t,r){var n=t[r];null!=n&&e.push(r+"="+u(n))};a.prototype.getLibpqConnectionString=function(e){var t=[];c(t,this,"user"),c(t,this,"password"),c(t,this,"port"),c(t,this,"application_name"),c(t,this,"fallback_application_name"),c(t,this,"connect_timeout");var r="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(c(t,r,"sslmode"),c(t,r,"sslca"),c(t,r,"sslkey"),c(t,r,"sslcert"),c(t,r,"sslrootcert"),this.database&&t.push("dbname="+u(this.database)),this.replication&&t.push("replication="+u(this.replication)),this.host&&t.push("host="+u(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+u(this.client_encoding)),n.lookup(this.host,(function(r,n){return r?e(r,null):(t.push("hostaddr="+u(n)),e(null,t.join(" ")))}))},e.exports=a},812:function(module,exports,__webpack_require__){"use strict";const warnDeprecation=__webpack_require__(802);let hasNewTarget;try{eval("(function () { new.target })"),hasNewTarget=!0}catch(e){hasNewTarget=!1}const checkConstructor=(e,t,r)=>{hasNewTarget&&void 0===r()&&warnDeprecation(`Constructing a ${e} without new is deprecated and will stop working in pg 8.`,t)};module.exports=checkConstructor},813:function(e,t,r){"use strict";var n=r(329),i=r(8).EventEmitter,s=r(5),o=r(814),a=r(833),u=r(802),c=function(e){i.call(this),e=e||{},this.stream=e.stream||new n.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.lastOffset=0,this.buffer=null,this.offset=null,this.encoding=e.encoding||"utf8",this.parsedStatements={},this.writer=new o,this.ssl=e.ssl||!1,this._ending=!1,this._mode=0,this._emitMessage=!1,this._reader=new a({headerSize:1,lengthPadding:-4});var t=this;this.on("newListener",(function(e){"message"===e&&(t._emitMessage=!0)}))};s.inherits(c,i),c.prototype.connect=function(e,t){var i=this;"closed"===this.stream.readyState?this.stream.connect(e,t):"open"===this.stream.readyState&&this.emit("connect"),this.stream.on("connect",(function(){i._keepAlive&&i.stream.setKeepAlive(!0,i._keepAliveInitialDelayMillis),i.emit("connect")}));const s=function(e){(!i._ending||"ECONNRESET"!==e.code&&"EPIPE"!==e.code)&&i.emit("error",e)};if(this.stream.on("error",s),this.stream.on("close",(function(){i.emit("end")})),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",(function(e){switch(e.toString("utf8")){case"S":break;case"N":return i.stream.end(),i.emit("error",new Error("The server does not support SSL connections"));default:return i.stream.end(),i.emit("error",new Error("There was an error establishing an SSL connection"))}var o=r(192);const a={socket:i.stream,checkServerIdentity:i.ssl.checkServerIdentity||o.checkServerIdentity,rejectUnauthorized:i.ssl.rejectUnauthorized,ca:i.ssl.ca,pfx:i.ssl.pfx,key:i.ssl.key,passphrase:i.ssl.passphrase,cert:i.ssl.cert,secureOptions:i.ssl.secureOptions,NPNProtocols:i.ssl.NPNProtocols};"boolean"!=typeof i.ssl.rejectUnauthorized&&u("Implicit disabling of certificate verification is deprecated and will be removed in pg 8. Specify `rejectUnauthorized: true` to require a valid CA or `rejectUnauthorized: false` to explicitly opt out of MITM protection.","PG-SSL-VERIFY"),0===n.isIP(t)&&(a.servername=t),i.stream=o.connect(a),i.stream.on("error",s),i.attachListeners(i.stream),i.emit("sslconnect")}))},c.prototype.attachListeners=function(e){var t=this;e.on("data",(function(e){t._reader.addChunk(e);for(var r=t._reader.read();r;){var n=t.parseMessage(r),i="error"===n.name?"errorMessage":n.name;t._emitMessage&&t.emit("message",n),t.emit(i,n),r=t._reader.read()}})),e.on("end",(function(){t.emit("end")}))},c.prototype.requestSsl=function(){var e=this.writer.addInt16(1234).addInt16(5679).flush(),t=e.length+4,r=(new o).addInt32(t).add(e).join();this.stream.write(r)},c.prototype.startup=function(e){var t=this.writer.addInt16(3).addInt16(0);Object.keys(e).forEach((function(r){var n=e[r];t.addCString(r).addCString(n)})),t.addCString("client_encoding").addCString("'utf-8'");var r=t.addCString("").flush(),n=r.length+4,i=(new o).addInt32(n).add(r).join();this.stream.write(i)},c.prototype.cancel=function(e,t){var r=this.writer.addInt16(1234).addInt16(5678).addInt32(e).addInt32(t).flush(),n=r.length+4,i=(new o).addInt32(n).add(r).join();this.stream.write(i)},c.prototype.password=function(e){this._send(112,this.writer.addCString(e))},c.prototype.sendSASLInitialResponseMessage=function(e,t){this.writer.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),this._send(112)},c.prototype.sendSCRAMClientFinalMessage=function(e){this.writer.addString(e),this._send(112)},c.prototype._send=function(e,t){return!!this.stream.writable&&(!0!==t?this.stream.write(this.writer.flush(e)):void this.writer.addHeader(e))},c.prototype.query=function(e){this.stream.write(this.writer.addCString(e).flush(81))},c.prototype.parse=function(e,t){e.name=e.name||"",e.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e.name,e.name.length),console.error("This can cause conflicts and silent errors executing queries")),e.types=e.types||[];for(var r=e.types.length,n=this.writer.addCString(e.name).addCString(e.text).addInt16(r),i=0;i<r;i++)n.addInt32(e.types[i]);this._send(80,t)},c.prototype.bind=function(e,t){(e=e||{}).portal=e.portal||"",e.statement=e.statement||"",e.binary=e.binary||!1;for(var r=e.values||[],n=r.length,i=!1,s=0;s<n;s++)i|=r[s]instanceof Buffer;var o=this.writer.addCString(e.portal).addCString(e.statement);if(i)for(o.addInt16(n),s=0;s<n;s++)o.addInt16(r[s]instanceof Buffer);else o.addInt16(0);o.addInt16(n);for(var a=0;a<n;a++){var u=r[a];null==u?o.addInt32(-1):u instanceof Buffer?(o.addInt32(u.length),o.add(u)):(o.addInt32(Buffer.byteLength(u)),o.addString(u))}e.binary?(o.addInt16(1),o.addInt16(1)):o.addInt16(0),this._send(66,t)},c.prototype.execute=function(e,t){(e=e||{}).portal=e.portal||"",e.rows=e.rows||"",this.writer.addCString(e.portal).addInt32(e.rows),this._send(69,t)};var h=Buffer.alloc(0);c.prototype.flush=function(){this.writer.add(h),this._send(72)},c.prototype.sync=function(){this.writer.flush(0),this.writer.add(h),this._ending=!0,this._send(83)};const l=Buffer.from([88,0,0,0,4]);c.prototype.end=function(){if(this.writer.add(h),this._ending=!0,this.stream.writable)return this.stream.write(l,()=>{this.stream.end()});this.stream.end()},c.prototype.close=function(e,t){this.writer.addCString(e.type+(e.name||"")),this._send(67,t)},c.prototype.describe=function(e,t){this.writer.addCString(e.type+(e.name||"")),this._send(68,t)},c.prototype.sendCopyFromChunk=function(e){this.stream.write(this.writer.add(e).flush(100))},c.prototype.endCopyFrom=function(){this.stream.write(this.writer.add(h).flush(99))},c.prototype.sendCopyFail=function(e){this.writer.addCString(e),this._send(102)};var p=function(e,t){this.name=e,this.length=t};c.prototype.parseMessage=function(e){this.offset=0;var t=e.length+4;switch(this._reader.header){case 82:return this.parseR(e,t);case 83:return this.parseS(e,t);case 75:return this.parseK(e,t);case 67:return this.parseC(e,t);case 90:return this.parseZ(e,t);case 84:return this.parseT(e,t);case 68:return this.parseD(e,t);case 69:return this.parseE(e,t);case 78:return this.parseN(e,t);case 49:return new p("parseComplete",t);case 50:return new p("bindComplete",t);case 51:return new p("closeComplete",t);case 65:return this.parseA(e,t);case 110:return new p("noData",t);case 73:return new p("emptyQuery",t);case 115:return new p("portalSuspended",t);case 71:return this.parseG(e,t);case 72:return this.parseH(e,t);case 87:return new p("replicationStart",t);case 99:return new p("copyDone",t);case 100:return this.parsed(e,t)}},c.prototype.parseR=function(e,t){var r=this.parseInt32(e),n=new p("authenticationOk",t);switch(r){case 0:return n;case 3:if(8===n.length)return n.name="authenticationCleartextPassword",n;break;case 5:if(12===n.length)return n.name="authenticationMD5Password",n.salt=Buffer.alloc(4),e.copy(n.salt,0,this.offset,this.offset+4),this.offset+=4,n;break;case 10:n.name="authenticationSASL",n.mechanisms=[];do{var i=this.parseCString(e);i&&n.mechanisms.push(i)}while(i);return n;case 11:return n.name="authenticationSASLContinue",n.data=this.readString(e,t-4),n;case 12:return n.name="authenticationSASLFinal",n.data=this.readString(e,t-4),n}throw new Error("Unknown authenticationOk message type"+s.inspect(n))},c.prototype.parseS=function(e,t){var r=new p("parameterStatus",t);return r.parameterName=this.parseCString(e),r.parameterValue=this.parseCString(e),r},c.prototype.parseK=function(e,t){var r=new p("backendKeyData",t);return r.processID=this.parseInt32(e),r.secretKey=this.parseInt32(e),r},c.prototype.parseC=function(e,t){var r=new p("commandComplete",t);return r.text=this.parseCString(e),r},c.prototype.parseZ=function(e,t){var r=new p("readyForQuery",t);return r.name="readyForQuery",r.status=this.readString(e,1),r};c.prototype.parseT=function(e,t){var r=new p("rowDescription",t);r.fieldCount=this.parseInt16(e);for(var n=[],i=0;i<r.fieldCount;i++)n.push(this.parseField(e));return r.fields=n,r};var f=function(){this.name=null,this.tableID=null,this.columnID=null,this.dataTypeID=null,this.dataTypeSize=null,this.dataTypeModifier=null,this.format=null};c.prototype.parseField=function(e){var t=new f;return t.name=this.parseCString(e),t.tableID=this.parseInt32(e),t.columnID=this.parseInt16(e),t.dataTypeID=this.parseInt32(e),t.dataTypeSize=this.parseInt16(e),t.dataTypeModifier=this.parseInt32(e),0===this.parseInt16(e)?(this._mode=0,t.format="text"):(this._mode=1,t.format="binary"),t};var d=function(e,t){this.name="dataRow",this.length=e,this.fieldCount=t,this.fields=[]};c.prototype.parseD=function(e,t){for(var r=this.parseInt16(e),n=new d(t,r),i=0;i<r;i++)n.fields.push(this._readValue(e));return n},c.prototype._readValue=function(e){var t=this.parseInt32(e);return-1===t?null:0===this._mode?this.readString(e,t):this.readBytes(e,t)},c.prototype.parseE=function(e,t){for(var r={},n=this.readString(e,1);"\0"!==n;)r[n]=this.parseCString(e),n=this.readString(e,1);var i=new Error(r.M);return i.name="error",i.length=t,i.severity=r.S,i.code=r.C,i.detail=r.D,i.hint=r.H,i.position=r.P,i.internalPosition=r.p,i.internalQuery=r.q,i.where=r.W,i.schema=r.s,i.table=r.t,i.column=r.c,i.dataType=r.d,i.constraint=r.n,i.file=r.F,i.line=r.L,i.routine=r.R,i},c.prototype.parseN=function(e,t){var r=this.parseE(e,t);return r.name="notice",r},c.prototype.parseA=function(e,t){var r=new p("notification",t);return r.processId=this.parseInt32(e),r.channel=this.parseCString(e),r.payload=this.parseCString(e),r},c.prototype.parseG=function(e,t){var r=new p("copyInResponse",t);return this.parseGH(e,r)},c.prototype.parseH=function(e,t){var r=new p("copyOutResponse",t);return this.parseGH(e,r)},c.prototype.parseGH=function(e,t){var r=0!==e[this.offset];this.offset++,t.binary=r;var n=this.parseInt16(e);t.columnTypes=[];for(var i=0;i<n;i++)t.columnTypes.push(this.parseInt16(e));return t},c.prototype.parsed=function(e,t){var r=new p("copyData",t);return r.chunk=this.readBytes(e,r.length-4),r},c.prototype.parseInt32=function(e){var t=e.readInt32BE(this.offset);return this.offset+=4,t},c.prototype.parseInt16=function(e){var t=e.readInt16BE(this.offset);return this.offset+=2,t},c.prototype.readString=function(e,t){return e.toString(this.encoding,this.offset,this.offset+=t)},c.prototype.readBytes=function(e,t){return e.slice(this.offset,this.offset+=t)},c.prototype.parseCString=function(e){var t=this.offset,r=e.indexOf(0,t);return this.offset=r+1,e.toString(this.encoding,t,r)},e.exports=c},814:function(e,t){var r=e.exports=function(e){this.size=e||1024,this.buffer=Buffer.alloc(this.size+5),this.offset=5,this.headerPosition=0};r.prototype._ensure=function(e){if(this.buffer.length-this.offset<e){var t=this.buffer,r=t.length+(t.length>>1)+e;this.buffer=Buffer.alloc(r),t.copy(this.buffer)}},r.prototype.addInt32=function(e){return this._ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this},r.prototype.addInt16=function(e){return this._ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this};var n=function(e,t,r,n){e.write(t,r,n)};3===Buffer.prototype.write.length&&(n=function(e,t,r,n){e.write(t,r)}),r.prototype.addCString=function(e){if(e){var t=Buffer.byteLength(e);this._ensure(t+1),n(this.buffer,e,this.offset,t),this.offset+=t}else this._ensure(1);return this.buffer[this.offset++]=0,this},r.prototype.addChar=function(e){return this._ensure(1),n(this.buffer,e,this.offset,1),this.offset++,this},r.prototype.addString=function(e){e=e||"";var t=Buffer.byteLength(e);return this._ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this},r.prototype.getByteLength=function(){return this.offset-5},r.prototype.add=function(e){return this._ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this},r.prototype.clear=function(){this.offset=5,this.headerPosition=0,this.lastEnd=0},r.prototype.addHeader=function(e,t){var r=this.offset;this.offset=this.headerPosition,this.buffer[this.offset++]=e,this.addInt32(r-(this.headerPosition+1)),this.headerPosition=r,this.offset=r,t||(this._ensure(5),this.offset+=5)},r.prototype.join=function(e){return e&&this.addHeader(e,!0),this.buffer.slice(e?0:5,this.offset)},r.prototype.flush=function(e){var t=this.join(e);return this.clear(),t}},815:function(e,t,r){"use strict";e.exports=r(839)},816:function(e,t,r){"use strict";function n(e,t){this.source=e,this.transform=t||i,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}function i(e){return e}t.parse=function(e,t){return new n(e,t).parse()},n.prototype.isEof=function(){return this.position>=this.source.length},n.prototype.nextCharacter=function(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}},n.prototype.record=function(e){this.recorded.push(e)},n.prototype.newEntry=function(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])},n.prototype.parse=function(e){for(var t,r,i;!this.isEof();)if("{"!==(t=this.nextCharacter()).value||i){if("}"!==t.value||i)'"'!==t.value||t.escaped?","!==t.value||i?this.record(t.value):this.newEntry():(i&&this.newEntry(!0),i=!i);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(r=new n(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}},817:function(e,t,r){var n=r(816);e.exports={create:function(e,t){return{parse:function(){return n.parse(e,t)}}}}},818:function(e,t,r){"use strict";r.r(t);var n=r(328),i=r.n(n),s=r(590),o=r.n(s),a=r(803).Pool,u=["alaska","arkansas","california","chicago","colorado","georgia","hawaii","illinois","iowa","ma","ma_02","maryland","michigan","minnesota","mississippi","nc","new_mexico","newyork","ohio","oklahoma","oregon","pennsylvania","providence_ri","rhode_island","texas","utah","vermont","virginia","washington","wisconsin"];exports.handler=function(){var e=o()(i.a.mark((function e(t,r){var n,s,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.callbackWaitsForEmptyEventLoop=!1,e.prev=1,n=new a({connectionString:process.env.POSTGRES_CONNECT,ssl:{rejectUnauthorized:!1}}),s=t.queryStringParameters.ids,o=t.queryStringParameters.state,u.includes(o)){e.next=6;break}throw new Error("did not recognize state in districtCenter.js");case 6:if("string"==typeof s){e.next=8;break}throw new Error("expected comma-separated list of unit IDs");case 8:return e.next=10,n.connect();case 10:return e.next=12,n.query("SELECT api.merged_"+o+"($1)",[s]);case 12:return c=e.sent,n.end(),e.abrupt("return",{statusCode:201,body:JSON.stringify(c.rows[0])});case 17:return e.prev=17,e.t0=e.catch(1),console.log("district.center",e.t0),e.abrupt("return",{statusCode:500,body:JSON.stringify({msg:e.t0.message})});case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,r){return e.apply(this,arguments)}}()},819:function(e,t,r){"use strict";var n=r(8).EventEmitter,i=r(5),s=r(801),o=r(824),a=r(825),u=r(810),c=r(811),h=r(831),l=r(797),p=r(813);process.env.PG_FAST_CONNECTION&&(p=r(834));var f=function(e){n.call(this),this.connectionParameters=new c(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,this.password=this.connectionParameters.password,this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||global.Promise,this._types=new u(t.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=t.connection||new p({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=t.binary||l.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this._connectionTimeoutMillis=t.connectionTimeoutMillis||0};i.inherits(f,n),f.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.handleError(e,this.connection)})};this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0},f.prototype._connect=function(e){var t,r,n=this,i=this.connection;if(this._connecting||this._connected){const t=new Error("Client has already been connected. You cannot reuse a client.");return void process.nextTick(()=>{e(t)})}function u(e){return function(t){"function"==typeof n.password?n._Promise.resolve().then(()=>n.password()).then(r=>{if(void 0!==r){if("string"!=typeof r)return void i.emit("error",new TypeError("Password must be a string"));n.connectionParameters.password=n.password=r}else n.connectionParameters.password=n.password=null;e(t)}).catch(e=>{i.emit("error",e)}):null!==n.password?e(t):a(n.connectionParameters,(function(r){void 0!==r&&(n.connectionParameters.password=n.password=r),e(t)}))}}this._connecting=!0,this._connectionTimeoutMillis>0&&(t=setTimeout(()=>{i._ending=!0,i.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?i.connect(this.host+"/.s.PGSQL."+this.port):i.connect(this.port,this.host),i.on("connect",(function(){n.ssl?i.requestSsl():i.startup(n.getStartupConf())})),i.on("sslconnect",(function(){i.startup(n.getStartupConf())})),i.on("authenticationCleartextPassword",u((function(){i.password(n.password)}))),i.on("authenticationMD5Password",u((function(e){i.password(s.postgresMd5PasswordHash(n.user,n.password,e.salt))}))),i.on("authenticationSASL",u((function(e){r=o.startSession(e.mechanisms),i.sendSASLInitialResponseMessage(r.mechanism,r.response)}))),i.on("authenticationSASLContinue",(function(e){o.continueSession(r,n.password,e.data),i.sendSCRAMClientFinalMessage(r.response)})),i.on("authenticationSASLFinal",(function(e){o.finalizeSession(r,e.data),r=null})),i.once("backendKeyData",(function(e){n.processID=e.processID,n.secretKey=e.secretKey}));const c=r=>{if(!this._connectionError){if(this._connectionError=!0,clearTimeout(t),e)return e(r);this.emit("error",r)}},h=e=>{this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)},l=e=>{const t=this.activeQuery;t?(this.activeQuery=null,t.handleError(e,i)):h(e)};i.on("error",c),i.on("errorMessage",c),i.once("readyForQuery",(function(){n._connecting=!1,n._connected=!0,n._attachListeners(i),i.removeListener("error",c),i.removeListener("errorMessage",c),i.on("error",h),i.on("errorMessage",l),clearTimeout(t),e&&(e(null,n),e=null),n.emit("connect")})),i.on("readyForQuery",(function(){var e=n.activeQuery;n.activeQuery=null,n.readyForQuery=!0,e&&e.handleReadyForQuery(i),n._pulseQueryQueue()})),i.once("end",()=>{const r=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(t),this._errorAllQueries(r),this._ending||(this._connecting&&!this._connectionError?e?e(r):h(r):this._connectionError||h(r)),process.nextTick(()=>{this.emit("end")})}),i.on("notice",(function(e){n.emit("notice",e)}))},f.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)},f.prototype._attachListeners=function(e){const t=this;e.on("rowDescription",(function(e){t.activeQuery.handleRowDescription(e)})),e.on("dataRow",(function(e){t.activeQuery.handleDataRow(e)})),e.on("portalSuspended",(function(r){t.activeQuery.handlePortalSuspended(e)})),e.on("emptyQuery",(function(r){t.activeQuery.handleEmptyQuery(e)})),e.on("commandComplete",(function(r){t.activeQuery.handleCommandComplete(r,e)})),e.on("parseComplete",(function(r){t.activeQuery.name&&(e.parsedStatements[t.activeQuery.name]=t.activeQuery.text)})),e.on("copyInResponse",(function(e){t.activeQuery.handleCopyInResponse(t.connection)})),e.on("copyData",(function(e){t.activeQuery.handleCopyData(e,t.connection)})),e.on("notification",(function(e){t.emit("notification",e)}))},f.prototype.getStartupConf=function(){var e=this.connectionParameters,t={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(t.application_name=r),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),t},f.prototype.cancel=function(e,t){if(e.activeQuery===t){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",(function(){r.cancel(e.processID,e.secretKey)}))}else-1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)},f.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},f.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)},f.prototype.escapeIdentifier=function(e){return'"'+e.replace(/"/g,'""')+'"'},f.prototype.escapeLiteral=function(e){for(var t=!1,r="'",n=0;n<e.length;n++){var i=e[n];"'"===i?r+=i+i:"\\"===i?(r+=i+i,t=!0):r+=i}return r+="'",!0===t&&(r=" E"+r),r},f.prototype._pulseQueryQueue=function(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;const e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))},f.prototype.query=function(e,t,r){var n,i,s,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(n.callback=n.callback||t)):(s=this.connectionParameters.query_timeout,(n=new h(e,t,r)).callback||(i=new this._Promise((e,t)=>{n.callback=(r,n)=>r?t(r):e(n)}))),s&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this.queryQueue.indexOf(n);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()},s),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(n),this._pulseQueryQueue(),i):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)},f.prototype.end=function(e){if(this._ending=!0,this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)},f.Query=h,e.exports=f},820:function(e,t,r){var n=r(804),i=r(805),s=r(806),o=r(807),a=r(808);function u(e){return function(t){return null===t?t:e(t)}}function c(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function h(e){return e?n.parse(e,c):null}function l(e){return parseInt(e,10)}function p(e){return e?n.parse(e,u(l)):null}function f(e){return e?n.parse(e,u((function(e){return b(e).trim()}))):null}var d=function(e){return e?i.create(e,(function(e){return null!==e&&(e=E(e)),e})).parse():null},m=function(e){return e?i.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e})).parse():null},y=function(e){return e?i.create(e).parse():null},g=function(e){return e?i.create(e,(function(e){return null!==e&&(e=s(e)),e})).parse():null},v=function(e){return e?i.create(e,(function(e){return null!==e&&(e=o(e)),e})).parse():null},_=function(e){return e?n.parse(e,u(a)):null},w=function(e){return parseInt(e,10)},b=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},S=function(e){return e?n.parse(e,u(JSON.parse)):null},E=function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},C=function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++)n||(t+=e[i]),")"!==e[i]?n&&","!==e[i]&&(r+=e[i]):n=!0;var s=E(t);return s.radius=parseFloat(r),s};e.exports={init:function(e){e(20,b),e(21,w),e(23,w),e(26,w),e(700,parseFloat),e(701,parseFloat),e(16,c),e(1082,s),e(1114,s),e(1184,s),e(600,E),e(651,y),e(718,C),e(1e3,h),e(1001,_),e(1005,p),e(1007,p),e(1028,p),e(1016,f),e(1017,d),e(1021,m),e(1022,m),e(1231,m),e(1014,y),e(1015,y),e(1008,y),e(1009,y),e(1040,y),e(1041,y),e(1115,g),e(1182,g),e(1185,g),e(1186,o),e(1187,v),e(17,a),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,S),e(3807,S),e(3907,y),e(2951,y),e(791,y),e(1183,y),e(1270,y)}}},821:function(e,t){e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},822:function(e,t,r){var n=r(809),i=function(e,t,r,n,i){n=n||!1,i=i||function(e,t,r){return e*Math.pow(2,r)+t};var s=(r=r||0)>>3,o=function(e){return n?255&~e:e},a=255,u=8-r%8;t<u&&(a=255<<8-t&255,u=t),r&&(a>>=r%8);var c=0;r%8+t>=8&&(c=i(0,o(e[s])&a,u));for(var h=t+r>>3,l=s+1;l<h;l++)c=i(c,o(e[l]),8);var p=(t+r)%8;return p>0&&(c=i(c,o(e[h])>>8-p,p)),c},s=function(e,t,r){var n=Math.pow(2,r-1)-1,s=i(e,1),o=i(e,r,1);if(0===o)return 0;var a=1,u=i(e,t,r+1,!1,(function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)a/=2,(t&1<<r-n)>0&&(e+=a);return e}));return o==Math.pow(2,r+1)-1?0===u?0===s?1/0:-1/0:NaN:(0===s?1:-1)*Math.pow(2,o-n)*u},o=function(e){return 1==i(e,1)?-1*(i(e,15,1,!0)+1):i(e,15,1)},a=function(e){return 1==i(e,1)?-1*(i(e,31,1,!0)+1):i(e,31,1)},u=function(e){return s(e,23,8)},c=function(e){return s(e,52,11)},h=function(e){var t=i(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,i(e,16,16)),n=0,s=i(e,16),o=0;o<s;o++)n+=i(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,i(e,16,48));return(0===t?1:-1)*Math.round(n*a)/a},l=function(e,t){var r=i(t,1),n=i(t,63,1),s=new Date((0===r?1:-1)*n/1e3+9466848e5);return e||s.setTime(s.getTime()+6e4*s.getTimezoneOffset()),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(e){this.usec=e},s.getUTCMicroSeconds=function(){return this.usec},s},p=function(e){for(var t=i(e,32),r=(i(e,32,32),i(e,32,64)),n=96,s=[],o=0;o<t;o++)s[o]=i(e,32,n),n+=32,n+=32;var a=function(t){var r,s=i(e,32,n);return n+=32,4294967295==s?null:23==t||20==t?(r=i(e,8*s,n),n+=8*s,r):25==t?r=e.toString(this.encoding,n>>3,(n+=s<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},u=function(e,t){var r,n=[];if(e.length>1){var i=e.shift();for(r=0;r<i;r++)n[r]=u(e,t);e.unshift(i)}else for(r=0;r<e[0];r++)n[r]=a(t);return n};return u(s,r)},f=function(e){return e.toString("utf8")},d=function(e){return null===e?null:i(e,8)>0};e.exports={init:function(e){e(20,n),e(21,o),e(23,a),e(26,a),e(1700,h),e(700,u),e(701,c),e(16,d),e(1114,l.bind(null,!1)),e(1184,l.bind(null,!0)),e(1e3,p),e(1007,p),e(1016,p),e(1008,p),e(1009,p),e(25,f)}}},823:function(e,t){e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}},824:function(e,t,r){"use strict";const n=r(46);function i(e,t){Buffer.isBuffer(e)||(e=Buffer.from(e)),Buffer.isBuffer(t)||(t=Buffer.from(t));var r=[];if(e.length>t.length)for(var n=0;n<t.length;n++)r.push(e[n]^t[n]);else for(var i=0;i<e.length;i++)r.push(e[i]^t[i]);return Buffer.from(r)}function s(e,t){return n.createHmac("sha256",e).update(t).digest()}e.exports={startSession:function(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");const t=n.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}},continueSession:function(e,t,r){if("SASLInitialResponse"!==e.message)throw new Error("SASL: Last message was not SASLInitialResponse");const o=function(e){var t,r,n;if(String(e).split(",").forEach((function(e){switch(e[0]){case"r":t=e.substr(2);break;case"s":r=e.substr(2);break;case"i":n=parseInt(e.substr(2),10)}})),!t)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");if(!r)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");if(!n)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:t,salt:r,iteration:n}}(r);if(!o.nonce.startsWith(e.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var a=function(e,t,r){for(var n=s(e,Buffer.concat([t,Buffer.from([0,0,0,1])])),o=n,a=0;a<r-1;a++)n=s(e,n),o=i(o,n);return o}(t,Buffer.from(o.salt,"base64"),o.iteration),u=s(a,"Client Key"),c=n.createHash("sha256").update(u).digest(),h="n=*,r="+e.clientNonce,l="r="+o.nonce+",s="+o.salt+",i="+o.iteration,p="c=biws,r="+o.nonce,f=h+","+l+","+p,d=i(u,s(c,f)).toString("base64"),m=s(a,"Server Key"),y=s(m,f);e.message="SASLResponse",e.serverSignature=y.toString("base64"),e.response=p+",p="+d},finalizeSession:function(e,t){if("SASLResponse"!==e.message)throw new Error("SASL: Last message was not SASLResponse");var r;if(String(t).split(",").forEach((function(e){switch(e[0]){case"v":r=e.substr(2)}})),r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}}},825:function(e,t,r){"use strict";r(75);var n=r(58),i=r(826);e.exports=function(e,t){var r=i.getFileName();n.stat(r,(function(s,o){if(s||!i.usePgPass(o,r))return t(void 0);var a=n.createReadStream(r);i.getPassword(e,a,t)}))},e.exports.warnTo=i.warnTo},826:function(e,t,r){"use strict";var n=r(75),i=r(34).Stream,s=r(827),o=r(5),a="win32"===process.platform,u=process.stderr;var c=["host","port","database","user","password"],h=c.length,l=c[h-1];function p(){var e=u instanceof i&&!0===u.writable;if(e){var t=Array.prototype.slice.call(arguments).concat("\n");u.write(o.format.apply(o,t))}}Object.defineProperty(e.exports,"isWin",{get:function(){return a},set:function(e){a=e}}),e.exports.warnTo=function(e){var t=u;return u=e,t},e.exports.getFileName=function(e){return(e=e||process.env).PGPASSFILE||(a?n.join(e.APPDATA,"postgresql","pgpass.conf"):n.join(e.HOME,".pgpass"))},e.exports.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")&&(!!a||(t=t||"<unkn>",32768!=(61440&e.mode)?(p('WARNING: password file "%s" is not a plain file',t),!1):!(63&e.mode)||(p('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1)))};var f=e.exports.match=function(e,t){return c.slice(0,-1).reduce((function(r,n,i){return 1==i&&Number(e[n]||5432)===Number(t[n])?r&&!0:r&&("*"===t[n]||t[n]===e[n])}),!0)};e.exports.getPassword=function(e,t,r){var n,i=t.pipe(new s);var o=function(e){t.destroy(),p("WARNING: error on reading file: %s",e),r(void 0)};t.on("error",o),i.on("data",(function(t){var r=d(t);r&&m(r)&&f(e,r)&&(n=r[l],i.end())})).on("end",(function(){t.destroy(),r(n)})).on("error",o)};var d=e.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,i=0,s={},o=function(t,r,n){var i=e.substring(r,n);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(i=i.replace(/\\([:\\])/g,"$1")),s[c[t]]=i},a=0;a<e.length-1;a+=1){if(t=e.charAt(a+1),r=e.charAt(a),n==h-1){o(n,i);break}a>=0&&":"==t&&"\\"!==r&&(o(n,i,a+1),i=a+2,n+=1)}return s=Object.keys(s).length===h?s:null},m=e.exports.isValidEntry=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||(e=Number(e),isFinite(e)&&e>0&&e<9007199254740992&&Math.floor(e)===e)},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},r=0;r<c.length;r+=1){if(!(0,t[r])(e[c[r]]||""))return!1}return!0}},827:function(e,t,r){var n=r(828),i=r(829).StringDecoder;e.exports=function(e,t,r){var s=new i,o="",a=r&&r.maxLength,u=!r||!1!==r.trailing;"function"==typeof e&&(t=e,e=null);e||(e=/\r?\n/);function c(e,r){if(t){try{r=t(r)}catch(t){return e.emit("error",t)}void 0!==r&&e.queue(r)}else e.queue(r)}function h(t,r){var n=((null!=o?o:"")+r).split(e);if(o=n.pop(),a&&o.length>a)return t.emit("error",new Error("maximum buffer reached"));for(var i=0;i<n.length;i++){c(t,n[i])}}return n((function(e){h(this,s.write(e))}),(function(){s.end&&h(this,s.end()),u&&null!=o&&c(this,o),this.queue(null)}))}},828:function(e,t,r){var n=r(34);function i(e,t,r){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var i=!1,s=!1,o=[],a=!1,u=new n;function c(){for(;o.length&&!u.paused;){var e=o.shift();if(null===e)return u.emit("end");u.emit("data",e)}}function h(){u.writable=!1,t.call(u),!u.readable&&u.autoDestroy&&u.destroy()}return u.readable=u.writable=!0,u.paused=!1,u.autoDestroy=!(r&&!1===r.autoDestroy),u.write=function(t){return e.call(this,t),!u.paused},u.queue=u.push=function(e){return a?u:(null===e&&(a=!0),o.push(e),c(),u)},u.on("end",(function(){u.readable=!1,!u.writable&&u.autoDestroy&&process.nextTick((function(){u.destroy()}))})),u.end=function(e){if(!i)return i=!0,arguments.length&&u.write(e),h(),u},u.destroy=function(){if(!s)return s=!0,i=!0,o.length=0,u.writable=u.readable=!1,u.emit("close"),u},u.pause=function(){if(!u.paused)return u.paused=!0,u},u.resume=function(){return u.paused&&(u.paused=!1,u.emit("resume")),c(),u.paused||u.emit("drain"),u},u}e.exports=i,i.through=i},829:function(e,t){e.exports=require("string_decoder")},830:function(e,t,r){"use strict";var n=r(207);e.exports={parse:function(e){var t;if("/"===e.charAt(0))return{host:(t=e.split(" "))[0],database:t[1]};/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/\%25(\d\d)/g,"%$1"));var r=n.parse(e,!0);if(t={},r.query.application_name&&(t.application_name=r.query.application_name),r.query.fallback_application_name&&(t.fallback_application_name=r.query.fallback_application_name),t.port=r.port,"socket:"==r.protocol)return t.host=decodeURI(r.pathname),t.database=r.query.db,t.client_encoding=r.query.encoding,t;t.host=r.hostname;var i=r.pathname;i&&"/"===i.charAt(0)&&(i=r.pathname.slice(1)||null),t.database=i&&decodeURI(i);var s=(r.auth||":").split(":");t.user=s[0],t.password=s.splice(1).join(":");var o=r.query.ssl;return"true"!==o&&"1"!==o||(t.ssl=!0),t}}},831:function(module,exports,__webpack_require__){"use strict";var EventEmitter=__webpack_require__(8).EventEmitter,util=__webpack_require__(5);const checkConstructor=__webpack_require__(812);var Result=__webpack_require__(832),utils=__webpack_require__(801),Query=function(config,values,callback){if(checkConstructor("Query","PG-QUERY-NEW",()=>eval("new.target")),!(this instanceof Query))return new Query(config,values,callback);config=utils.normalizeQueryConfig(config,values,callback),this.text=config.text,this.values=config.values,this.rows=config.rows,this.types=config.types,this.name=config.name,this.binary=config.binary,this.portal=config.portal||"",this.callback=config.callback,this._rowMode=config.rowMode,process.domain&&config.callback&&(this.callback=process.domain.bind(config.callback)),this._result=new Result(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null,EventEmitter.call(this)};util.inherits(Query,EventEmitter),Query.prototype.requiresPreparation=function(){return!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0))},Query.prototype._checkForMultirow=function(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new Result(this._rowMode,this.types),this._results.push(this._result))},Query.prototype.handleRowDescription=function(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length},Query.prototype.handleDataRow=function(e){var t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){return void(this._canceledDueToError=e)}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}},Query.prototype.handleCommandComplete=function(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.isPreparedStatement&&t.sync()},Query.prototype.handleEmptyQuery=function(e){this.isPreparedStatement&&e.sync()},Query.prototype.handleReadyForQuery=function(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);this.callback&&this.callback(null,this._results),this.emit("end",this._results)},Query.prototype.handleError=function(e,t){if(this.isPreparedStatement&&t.sync(),this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)},Query.prototype.submit=function(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return new Error("A query must have either text or a name. Supplying neither is unsupported.");const t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)},Query.prototype.hasBeenParsed=function(e){return this.name&&e.parsedStatements[this.name]},Query.prototype.handlePortalSuspended=function(e){this._getRows(e,this.rows)},Query.prototype._getRows=function(e,t){e.execute({portal:this.portal,rows:t},!0),e.flush()},Query.prototype.prepare=function(e){if(this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types},!0),this.values)try{this.values=this.values.map(utils.prepareValue)}catch(t){return void this.handleError(t,e)}e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary},!0),e.describe({type:"P",name:this.portal||""},!0),this._getRows(e,this.rows)},Query.prototype.handleCopyInResponse=function(e){e.sendCopyFail("No source stream defined")},Query.prototype.handleCopyData=function(e,t){},module.exports=Query},832:function(e,t,r){"use strict";var n=r(798),i=function(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)},s=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;i.prototype.addCommandComplete=function(e){var t;(t=e.text?s.exec(e.text):s.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))},i.prototype._parseRowAsArray=function(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;r++){var i=e[r];t[r]=null!==i?this._parsers[r](i):null}return t},i.prototype.parseRow=function(e){for(var t={},r=0,n=e.length;r<n;r++){var i=e[r],s=this.fields[r].name;t[s]=null!==i?this._parsers[r](i):null}return t},i.prototype.addRow=function(e){this.rows.push(e)},i.prototype.addFields=function(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var t=0;t<e.length;t++){var r=e[t];this._types?this._parsers[t]=this._types.getTypeParser(r.dataTypeID,r.format||"text"):this._parsers[t]=n.getTypeParser(r.dataTypeID,r.format||"text")}},e.exports=i},833:function(e,t,r){var n=r(74),i=e.exports=function(e){"number"==typeof e&&(e={headerSize:e}),e=e||{},this.offset=0,this.lastChunk=!1,this.chunk=null,this.chunkLength=0,this.headerSize=e.headerSize||0,this.lengthPadding=e.lengthPadding||0,this.header=null,n(this.headerSize<2,"pre-length header of more than 1 byte length not currently supported")};i.prototype.addChunk=function(e){if(!this.chunk||this.offset===this.chunkLength)return this.chunk=e,this.chunkLength=e.length,void(this.offset=0);var t=e.length,r=this.chunkLength+t;if(r>this.chunk.length){for(var n=2*this.chunk.length;r>=n;)n*=2;var i=Buffer.alloc(n);this.chunk.copy(i),this.chunk=i}e.copy(this.chunk,this.chunkLength),this.chunkLength=r},i.prototype.read=function(){if(this.chunkLength<this.headerSize+4+this.offset)return!1;this.headerSize&&(this.header=this.chunk[this.offset]);var e=this.chunk.readUInt32BE(this.offset+this.headerSize)+this.lengthPadding;if(e>this.chunkLength-(this.offset+4+this.headerSize))return!1;this.offset+=this.headerSize+4;var t=this.chunk.slice(this.offset,this.offset+e);return this.offset+=e,t}},834:function(e,t,r){"use strict";var n=r(329),i=r(8).EventEmitter,s=r(5),o=r(814),a=r(835),u=r(802);console.log("using faster connection");var c=function(e){i.call(this),e=e||{},this.stream=e.stream||new n.Socket,this.stream.setNoDelay(!0),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.lastOffset=0,this.buffer=null,this.offset=null,this.encoding=e.encoding||"utf8",this.parsedStatements={},this.writer=new o,this.ssl=e.ssl||!1,this._ending=!1,this._mode=0,this._emitMessage=!1;var t=this;this.on("newListener",(function(e){"message"===e&&(t._emitMessage=!0)}))};s.inherits(c,i),c.prototype.connect=function(e,t){var i=this;"closed"===this.stream.readyState?this.stream.connect(e,t):"open"===this.stream.readyState&&this.emit("connect"),this.stream.on("connect",(function(){i._keepAlive&&i.stream.setKeepAlive(!0,i._keepAliveInitialDelayMillis),i.emit("connect")}));const s=function(e){(!i._ending||"ECONNRESET"!==e.code&&"EPIPE"!==e.code)&&i.emit("error",e)};if(this.stream.on("error",s),this.stream.on("close",(function(){i.emit("end")})),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",(function(e){switch(e.toString("utf8")){case"N":return i.emit("error",new Error("The server does not support SSL connections"));case"S":break;default:return i.emit("error",new Error("There was an error establishing an SSL connection"))}var o=r(192);const a={socket:i.stream,checkServerIdentity:i.ssl.checkServerIdentity||o.checkServerIdentity,rejectUnauthorized:i.ssl.rejectUnauthorized,ca:i.ssl.ca,pfx:i.ssl.pfx,key:i.ssl.key,passphrase:i.ssl.passphrase,cert:i.ssl.cert,secureOptions:i.ssl.secureOptions,NPNProtocols:i.ssl.NPNProtocols};"boolean"!=typeof i.ssl.rejectUnauthorized&&u("Implicit disabling of certificate verification is deprecated and will be removed in pg 8. Specify `rejectUnauthorized: true` to require a valid CA or `rejectUnauthorized: false` to explicitly opt out of MITM protection.","PG-SSL-VERIFY"),0===n.isIP(t)&&(a.servername=t),i.stream=o.connect(a),i.attachListeners(i.stream),i.stream.on("error",s),i.emit("sslconnect")}))},c.prototype.attachListeners=function(e){var t=this;const r=0===this._mode?"text":"binary",n=new a.PgPacketStream({mode:r});this.stream.pipe(n),n.on("data",e=>{var r="error"===e.name?"errorMessage":e.name;t._emitMessage&&t.emit("message",e),t.emit(r,e)}),e.on("end",(function(){t.emit("end")}))},c.prototype.requestSsl=function(){var e=this.writer.addInt16(1234).addInt16(5679).flush(),t=e.length+4,r=(new o).addInt32(t).add(e).join();this.stream.write(r)},c.prototype.startup=function(e){var t=this.writer.addInt16(3).addInt16(0);Object.keys(e).forEach((function(r){var n=e[r];t.addCString(r).addCString(n)})),t.addCString("client_encoding").addCString("'utf-8'");var r=t.addCString("").flush(),n=r.length+4,i=(new o).addInt32(n).add(r).join();this.stream.write(i)},c.prototype.cancel=function(e,t){var r=this.writer.addInt16(1234).addInt16(5678).addInt32(e).addInt32(t).flush(),n=r.length+4,i=(new o).addInt32(n).add(r).join();this.stream.write(i)},c.prototype.password=function(e){this._send(112,this.writer.addCString(e))},c.prototype.sendSASLInitialResponseMessage=function(e,t){this.writer.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),this._send(112)},c.prototype.sendSCRAMClientFinalMessage=function(e){this.writer.addString(e),this._send(112)},c.prototype._send=function(e,t){return!!this.stream.writable&&this.stream.write(this.writer.flush(e))},c.prototype.query=function(e){this.stream.write(this.writer.addCString(e).flush(81))},c.prototype.parse=function(e){e.name=e.name||"",e.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e.name,e.name.length),console.error("This can cause conflicts and silent errors executing queries")),e.types=e.types||[];for(var t=e.types.length,r=this.writer.addCString(e.name).addCString(e.text).addInt16(t),n=0;n<t;n++)r.addInt32(e.types[n]);this._send(80),this.flush()},c.prototype.bind=function(e){(e=e||{}).portal=e.portal||"",e.statement=e.statement||"",e.binary=e.binary||!1;for(var t=e.values||[],r=t.length,n=!1,i=0;i<r;i++)n|=t[i]instanceof Buffer;var s=this.writer.addCString(e.portal).addCString(e.statement);if(n)for(s.addInt16(r),i=0;i<r;i++)s.addInt16(t[i]instanceof Buffer);else s.addInt16(0);s.addInt16(r);for(var o=0;o<r;o++){var a=t[o];null==a?s.addInt32(-1):a instanceof Buffer?(s.addInt32(a.length),s.add(a)):(s.addInt32(Buffer.byteLength(a)),s.addString(a))}e.binary?(s.addInt16(1),s.addInt16(1)):s.addInt16(0),this._send(66),this.flush()},c.prototype.execute=function(e){(e=e||{}).portal=e.portal||"",e.rows=e.rows||"",this.writer.addCString(e.portal).addInt32(e.rows),this._send(69),this.flush()};var h=Buffer.alloc(0);const l=Buffer.from([72,0,0,0,4]);c.prototype.flush=function(){this.stream.writable&&this.stream.write(l)};const p=Buffer.from([83,0,0,0,4]);c.prototype.sync=function(){this._ending=!0,this.writer.clear(),this.stream.writable&&(this.stream.write(p),this.stream.write(l))};const f=Buffer.from([88,0,0,0,4]);c.prototype.end=function(){return this.writer.clear(),this._ending=!0,this.stream.write(f,()=>{this.stream.end()})},c.prototype.close=function(e){this.writer.addCString(e.type+(e.name||"")),this._send(67)},c.prototype.describe=function(e){this.writer.addCString(e.type+(e.name||"")),this._send(68),this.flush()},c.prototype.sendCopyFromChunk=function(e){this.stream.write(this.writer.add(e).flush(100))},c.prototype.endCopyFrom=function(){this.stream.write(this.writer.add(h).flush(99))},c.prototype.sendCopyFail=function(e){this.writer.addCString(e),this._send(102)},e.exports=c},835:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(34),s=r(836),o=r(837),a=n(r(74)),u=Buffer.allocUnsafe(0);class c extends i.Transform{constructor(e){var t,r;if(super(Object.assign(Object.assign({},e),{readableObjectMode:!0})),this.remainingBuffer=u,this.reader=new o.BufferReader,"binary"===(null===(t=e)||void 0===t?void 0:t.mode))throw new Error("Binary mode not supported yet");this.mode=(null===(r=e)||void 0===r?void 0:r.mode)||"text"}_transform(e,t,r){let n=e;this.remainingBuffer.byteLength&&(n=Buffer.allocUnsafe(this.remainingBuffer.byteLength+e.byteLength),this.remainingBuffer.copy(n),e.copy(n,this.remainingBuffer.byteLength));let i=0;for(;i+5<=n.byteLength;){const e=n[i],t=n.readUInt32BE(i+1),r=1+t;if(!(r+i<=n.byteLength))break;{const s=this.handlePacket(i+5,e,t,n);this.push(s),i+=r}}i===n.byteLength?this.remainingBuffer=u:this.remainingBuffer=n.slice(i),r(null)}handlePacket(e,t,r,n){switch(t){case 50:return s.bindComplete;case 49:return s.parseComplete;case 51:return s.closeComplete;case 110:return s.noData;case 115:return s.portalSuspended;case 99:return s.copyDone;case 87:return s.replicationStart;case 73:return s.emptyQuery;case 68:return this.parseDataRowMessage(e,r,n);case 67:return this.parseCommandCompleteMessage(e,r,n);case 90:return this.parseReadyForQueryMessage(e,r,n);case 65:return this.parseNotificationMessage(e,r,n);case 82:return this.parseAuthenticationResponse(e,r,n);case 83:return this.parseParameterStatusMessage(e,r,n);case 75:return this.parseBackendKeyData(e,r,n);case 69:return this.parseErrorMessage(e,r,n,"error");case 78:return this.parseErrorMessage(e,r,n,"notice");case 84:return this.parseRowDescriptionMessage(e,r,n);case 71:return this.parseCopyInMessage(e,r,n);case 72:return this.parseCopyOutMessage(e,r,n);case 100:return this.parseCopyData(e,r,n);default:a.default.fail(`unknown message code: ${t.toString(16)}`)}}_flush(e){this._transform(Buffer.alloc(0),"utf-8",e)}parseReadyForQueryMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.string(1);return new s.ReadyForQueryMessage(t,n)}parseCommandCompleteMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring();return new s.CommandCompleteMessage(t,n)}parseCopyData(e,t,r){const n=r.slice(e,e+(t-4));return new s.CopyDataMessage(t,n)}parseCopyInMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyInResponse")}parseCopyOutMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyOutResponse")}parseCopyMessage(e,t,r,n){this.reader.setBuffer(e,r);const i=0!==this.reader.byte(),o=this.reader.int16(),a=new s.CopyResponse(t,n,i,o);for(let e=0;e<o;e++)a.columnTypes[e]=this.reader.int16();return a}parseNotificationMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.cstring(),o=this.reader.cstring();return new s.NotificationResponseMessage(t,n,i,o)}parseRowDescriptionMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new s.RowDescriptionMessage(t,n);for(let e=0;e<n;e++)i.fields[e]=this.parseField();return i}parseField(){const e=this.reader.cstring(),t=this.reader.int32(),r=this.reader.int16(),n=this.reader.int32(),i=this.reader.int16(),o=this.reader.int32(),a=0===this.reader.int16()?"text":"binary";return new s.Field(e,t,r,n,i,o,a)}parseDataRowMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new Array(n);for(let e=0;e<n;e++){const t=this.reader.int32();-1===t?i[e]=null:"text"===this.mode&&(i[e]=this.reader.string(t))}return new s.DataRowMessage(t,i)}parseParameterStatusMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring(),i=this.reader.cstring();return new s.ParameterStatusMessage(t,n,i)}parseBackendKeyData(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.int32();return new s.BackendKeyDataMessage(t,n,i)}parseAuthenticationResponse(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i={name:"authenticationOk",length:t};switch(n){case 0:break;case 3:8===i.length&&(i.name="authenticationCleartextPassword");break;case 5:if(12===i.length){i.name="authenticationMD5Password";const e=this.reader.bytes(4);return new s.AuthenticationMD5Password(t,e)}break;case 10:let e;i.name="authenticationSASL",i.mechanisms=[];do{e=this.reader.cstring(),e&&i.mechanisms.push(e)}while(e);break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(t-4);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(t-4);break;default:throw new Error("Unknown authenticationOk message type "+n)}return i}parseErrorMessage(e,t,r,n){this.reader.setBuffer(e,r);for(var i={},o=this.reader.string(1);"\0"!==o;)i[o]=this.reader.cstring(),o=this.reader.string(1);var a=new s.DatabaseError(i.M,t,n);return a.severity=i.S,a.code=i.C,a.detail=i.D,a.hint=i.H,a.position=i.P,a.internalPosition=i.p,a.internalQuery=i.q,a.where=i.W,a.schema=i.s,a.table=i.t,a.column=i.c,a.dataType=i.d,a.constraint=i.n,a.file=i.F,a.line=i.L,a.routine=i.R,a}}t.PgPacketStream=c},836:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};class n extends Error{constructor(e,t,r){super(e),this.length=t,this.name=r}}t.DatabaseError=n;t.CopyDataMessage=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};t.CopyResponse=class{constructor(e,t,r,n){this.length=e,this.name=t,this.binary=r,this.columnTypes=new Array(n)}};t.Field=class{constructor(e,t,r,n,i,s,o){this.name=e,this.tableID=t,this.columnID=r,this.dataTypeID=n,this.dataTypeSize=i,this.dataTypeModifier=s,this.format=o}};t.RowDescriptionMessage=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};t.ParameterStatusMessage=class{constructor(e,t,r){this.length=e,this.parameterName=t,this.parameterValue=r,this.name="parameterStatus"}};t.AuthenticationMD5Password=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};t.BackendKeyDataMessage=class{constructor(e,t,r){this.length=e,this.processID=t,this.secretKey=r,this.name="backendKeyData"}};t.NotificationResponseMessage=class{constructor(e,t,r,n){this.length=e,this.processId=t,this.channel=r,this.payload=n,this.name="notification"}};t.ReadyForQueryMessage=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};t.CommandCompleteMessage=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};t.DataRowMessage=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}}},837:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=Buffer.allocUnsafe(0);t.BufferReader=class{constructor(e=0){this.offset=e,this.buffer=n,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){const e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){const e=this.buffer[this.offset];return this.offset++,e}int32(){const e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){const t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){var e=this.offset,t=this.buffer.indexOf(0,e);return this.offset=t+1,this.buffer.toString(this.encoding,e,t)}bytes(e){const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}}},838:function(e,t,r){"use strict";const n=r(8).EventEmitter,i=function(){},s=(e,t)=>{const r=e.findIndex(t);return-1===r?void 0:e.splice(r,1)[0]};class o{constructor(e,t,r){this.client=e,this.idleListener=t,this.timeoutId=r}}class a{constructor(e){this.callback=e}}function u(e,t){if(t)return{callback:t,result:void 0};let r,n;return{callback:function(e,t){e?r(e):n(t)},result:new e((function(e,t){n=e,r=t}))}}e.exports=class extends n{constructor(e,t){super(),this.options=Object.assign({},e),this.options.max=this.options.max||this.options.poolSize||10,this.log=this.options.log||function(){},this.Client=this.options.Client||t||r(803).Client,this.Promise=this.options.Promise||global.Promise,void 0===this.options.idleTimeoutMillis&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending)return this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),void(this._clients.length||(this.ended=!0,this._endCallback()));if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;const e=this._pendingQueue.shift();if(this._idle.length){const t=this._idle.pop();clearTimeout(t.timeoutId);const r=t.client,n=t.idleListener;return this._acquireClient(r,e,n,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){const t=s(this._idle,t=>t.client===e);void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(t=>t!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){const t=new Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}const t=u(this.Promise,e),r=t.result;if(this._clients.length>=this.options.max||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new a(t.callback)),r;const e=(e,r,n)=>{clearTimeout(i),t.callback(e,r,n)},n=new a(e),i=setTimeout(()=>{s(this._pendingQueue,t=>t.callback===e),n.timedOut=!0,t.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(n),r}return this.newClient(new a(t.callback)),r}newClient(e){const t=new this.Client(this.options);this._clients.push(t);const r=function(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}(this,t);let n;this.log("checking client timeout");let s=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),s=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect(o=>{if(n&&clearTimeout(n),t.on("error",r),!o)return this.log("new client connected"),this._acquireClient(t,e,r,!0);this.log("client failed to connect",o),this._clients=this._clients.filter(e=>e!==t),s&&(o.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(o,void 0,i)})}_acquireClient(e,t,r,n){n&&this.emit("connect",e),this.emit("acquire",e);let s=!1;e.release=t=>{s&&function(){throw new Error("Release called on client which has already been released to the pool.")}(),s=!0,this._release(e,r,t)},e.removeListener("error",r),t.timedOut?n&&this.options.verify?this.options.verify(e,e.release):e.release():n&&this.options.verify?this.options.verify(e,r=>{if(r)return e.release(r),t.callback(r,void 0,i);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_release(e,t,r){if(e.on("error",t),r||this.ending||!e._queryable||e._ending)return this._remove(e),void this._pulseQueue();let n;this.options.idleTimeoutMillis&&(n=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis)),this._idle.push(new o(e,t,n)),this._pulseQueue()}query(e,t,r){if("function"==typeof e){const t=u(this.Promise,e);return setImmediate((function(){return t.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))})),t.result}"function"==typeof t&&(r=t,t=void 0);const n=u(this.Promise,r);return r=n.callback,this.connect((n,i)=>{if(n)return r(n);let s=!1;const o=e=>{s||(s=!0,i.release(e),r(e))};i.once("error",o),this.log("dispatching query"),i.query(e,t,(e,t)=>{if(this.log("query dispatched"),i.removeListener("error",o),!s)return s=!0,i.release(e),e?r(e):r(void 0,t)})}),n.result}end(e){if(this.log("ending"),this.ending){const t=new Error("Called end on pool more than once");return e?e(t):this.Promise.reject(t)}this.ending=!0;const t=u(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get totalCount(){return this._clients.length}}},839:function(e,t,r){"use strict";var n=r(840),i=r(810),s=r(848),o=r(849),a=r(74),u=r(8).EventEmitter,c=r(5),h=r(811),l="Version >= "+o.minNativeVersion+" of pg-native required.";a(s.gte(n.version,o.minNativeVersion),l);var p=r(850),f=e.exports=function(e){u.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new i(e.types),this.native=new n({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var t=this.connectionParameters=new h(e);this.user=t.user,this.password=t.password,this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};f.Query=p,c.inherits(f,u),f.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.native=this.native,t.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},f.prototype._connect=function(e){var t=this;this._connecting?process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client."))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString((function(r,n){if(r)return e(r);t.native.connect(n,(function(r){if(r)return t.native.end(),e(r);t._connected=!0,t.native.on("error",(function(e){t._queryable=!1,t._errorAllQueries(e),t.emit("error",e)})),t.native.on("notification",(function(e){t.emit("notification",{channel:e.relname,payload:e.extra})})),t.emit("connect"),t._pulseQueryQueue(!0),e()}))})))},f.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)},f.prototype.query=function(e,t,r){var n,i,s,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,"function"==typeof t&&(e.callback=t);else if(s=this.connectionParameters.query_timeout,!(n=new p(e,t,r)).callback){let e,t;i=new this._Promise((r,n)=>{e=r,t=n}),n.callback=(r,n)=>r?t(r):e(n)}return s&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this._queryQueue.indexOf(n);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()},s),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)},f.prototype.end=function(e){var t,r=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(t=new this._Promise((function(t,r){e=e=>e?r(e):t()}))),this.native.end((function(){r._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{r.emit("end"),e&&e()})})),t},f.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},f.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(t){this._activeQuery=t,t.submit(this);var r=this;t.once("_done",(function(){r._pulseQueryQueue()}))}else e||this.emit("drain")}},f.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel((function(){})):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},f.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},f.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}},840:function(e,t,r){var n=r(841),i=r(8).EventEmitter,s=r(5),o=r(74),a=r(842),u=r(845),c=r(846),h=e.exports=function(e){if(!(this instanceof h))return new h(e);e=e||{},i.call(this),this.pq=new n,this._reading=!1,this._read=this._read.bind(this),this._types=e.types||a,this.arrayMode=e.arrayMode||!1,this._resultCount=0,this._rows=void 0,this._results=void 0,this.on("newListener",e=>{"notification"===e&&this._startReading()}),this.on("_queryError",this._onQueryError.bind(this)),this.on("result",this._onResult.bind(this)),this.on("readyForQuery",this._onReadyForQuery.bind(this))};s.inherits(h,i),h.prototype.connect=function(e,t){this.pq.connect(e,t)},h.prototype.connectSync=function(e){this.pq.connectSync(e)},h.prototype.query=function(e,t,r){var n;"function"==typeof t?(r=t,n=function(){return i.pq.sendQuery(e)}):n=function(){return i.pq.sendQueryParams(e,t)};var i=this;i._dispatchQuery(i.pq,n,(function(e){if(e)return r(e);i._awaitResult(r)}))},h.prototype.prepare=function(e,t,r,n){var i=this;i._dispatchQuery(i.pq,(function(){return i.pq.sendPrepare(e,t,r)}),(function(e){if(e)return n(e);i._awaitResult(n)}))},h.prototype.execute=function(e,t,r){var n=this;n._dispatchQuery(n.pq,(function(){return n.pq.sendQueryPrepared(e,t)}),(function(e,t){if(e)return r(e);n._awaitResult(r)}))},h.prototype.getCopyStream=function(){return this.pq.setNonBlocking(!0),this._stopReading(),new c(this.pq)},h.prototype.cancel=function(e){o(e,"Callback is required");var t=this.pq.cancel();return setImmediate((function(){e(!0===t?void 0:new Error(t))}))},h.prototype.querySync=function(e,t){return t?this.pq.execParams(e,t):this.pq.exec(e),l(this.pq),u(this.pq,this._types,this.arrayMode).rows},h.prototype.prepareSync=function(e,t,r){this.pq.prepare(e,t,r),l(this.pq)},h.prototype.executeSync=function(e,t){return this.pq.execPrepared(e,t),l(this.pq),u(this.pq,this._types,this.arrayMode).rows},h.prototype.escapeLiteral=function(e){return this.pq.escapeLiteral(e)},h.prototype.escapeIdentifier=function(e){return this.pq.escapeIdentifier(e)},e.exports.version=r(847).version,h.prototype.end=function(e){this._stopReading(),this.pq.finish(),e&&setImmediate(e)},h.prototype._readError=function(e){var t=new Error(e||this.pq.errorMessage());this._queryCallback?this.emit("_queryError",t):this.emit("error",t)},h.prototype._stopReading=function(){this._reading&&(this._reading=!1,this.pq.stopReader(),this.pq.removeListener("readable",this._read))},h.prototype._consumeQueryResults=function(e){return u(e,this._types,this.arrayMode)},h.prototype._emitResult=function(e){var t=e.resultStatus();switch(t){case"PGRES_FATAL_ERROR":this._readError();break;case"PGRES_TUPLES_OK":case"PGRES_COMMAND_OK":case"PGRES_EMPTY_QUERY":const e=this._consumeQueryResults(this.pq);this.emit("result",e);break;case"PGRES_COPY_OUT":case"PGRES_COPY_BOTH":break;default:this._readError("unrecognized command status: "+t)}return t},h.prototype._read=function(){var e=this.pq;if(!e.consumeInput())return this._readError();if(!e.isBusy()){for(;e.getResult();){const t=this._emitResult(this.pq);if("PGRES_COPY_BOTH"===t||"PGRES_COPY_OUT"===t)break;if(e.isBusy())return}this.emit("readyForQuery");for(var t=this.pq.notifies();t;)this.emit("notification",t),t=this.pq.notifies()}},h.prototype._startReading=function(){this._reading||(this._reading=!0,this.pq.on("readable",this._read),this.pq.startReader())};var l=function(e){var t=e.resultErrorMessage()||e.errorMessage();if(t)throw new Error(t)};h.prototype._awaitResult=function(e){return this._queryCallback=e,this._startReading()},h.prototype._waitForDrain=function(e,t){var r=e.flush();if(0===r)return t();if(-1===r)return t(e.errorMessage());var n=this;return e.writable((function(){n._waitForDrain(e,t)}))},h.prototype._dispatchQuery=function(e,t,r){return this._stopReading(),e.setNonBlocking(!0)?t()?void this._waitForDrain(e,r):r(new Error(e.errorMessage()||"Something went wrong dispatching the query")):r(new Error("Unable to set non-blocking to true"))},h.prototype._onQueryError=function(e){this._queryError=e},h.prototype._onResult=function(e){0===this._resultCount?(this._results=e,this._rows=e.rows):1===this._resultCount?(this._results=[this._results,e],this._rows=[this._rows,e.rows]):(this._results.push(e),this._rows.push(e.rows)),this._resultCount++},h.prototype._onReadyForQuery=function(){const e=this._queryCallback;this._queryCallback=void 0;const t=this._queryError;this._queryError=void 0;const r=this._rows;this._rows=void 0;const n=this._results;this._results=void 0,this._resultCount=0,e&&e(t,r||[],n)}},841:function(e,t,r){(function(e,t){var n=e.exports=r(208)("addon.node").PQ;if(!e.parent){var i=r(75);console.log(i.normalize(t+"/src"))}var s=r(8).EventEmitter,o=r(74);for(var a in s.prototype)n.prototype[a]=s.prototype[a];n.prototype.connectSync=function(e){if(this.connected=!0,e||(e=""),!this.$connectSync(e)){var t=new Error(this.errorMessage());throw this.finish(),t}},n.prototype.connect=function(e,t){this.connected=!0,"function"==typeof e&&(t=e,e=""),e||(e=""),o(t,"Must provide a connection callback"),process.domain&&(t=process.domain.bind(t)),this.$connect(e,t)},n.prototype.errorMessage=function(){return this.$getLastErrorMessage()},n.prototype.socket=function(){return this.$socket()},n.prototype.serverVersion=function(){return this.$serverVersion()},n.prototype.finish=function(){this.connected=!1,this.$finish()},n.prototype.exec=function(e){e||(e=""),this.$exec(e)},n.prototype.execParams=function(e,t){e||(e=""),t||(t=[]),this.$execParams(e,t)},n.prototype.prepare=function(e,t,r){o.equal(arguments.length,3,"Must supply 3 arguments"),e||(e=""),t||(t=""),r=Number(r)||0,this.$prepare(e,t,r)},n.prototype.execPrepared=function(e,t){e||(e=""),t||(t=[]),this.$execPrepared(e,t)},n.prototype.sendQuery=function(e){return e||(e=""),this.$sendQuery(e)},n.prototype.sendQueryParams=function(e,t){return e||(e=""),t||(t=[]),this.$sendQueryParams(e,t)},n.prototype.sendPrepare=function(e,t,r){return o.equal(arguments.length,3,"Must supply 3 arguments"),e||(e=""),t||(t=""),r=Number(r)||0,this.$sendPrepare(e,t,r)},n.prototype.sendQueryPrepared=function(e,t){return e||(e=""),t||(t=[]),this.$sendQueryPrepared(e,t)},n.prototype.getResult=function(){return this.$getResult()},n.prototype.resultStatus=function(){return this.$resultStatus()},n.prototype.resultErrorMessage=function(){return this.$resultErrorMessage()},n.prototype.resultErrorFields=function(){return this.$resultErrorFields()},n.prototype.clear=function(){this.$clear()},n.prototype.ntuples=function(){return this.$ntuples()},n.prototype.nfields=function(){return this.$nfields()},n.prototype.fname=function(e){return this.$fname(e)},n.prototype.ftype=function(e){return this.$ftype(e)},n.prototype.getvalue=function(e,t){return this.$getvalue(e,t)},n.prototype.getisnull=function(e,t){return this.$getisnull(e,t)},n.prototype.cmdStatus=function(){return this.$cmdStatus()},n.prototype.cmdTuples=function(){return this.$cmdTuples()},n.prototype.startReader=function(){o(this.connected,"Must be connected to start reader"),this.$startRead()},n.prototype.stopReader=function(){this.$stopRead()},n.prototype.writable=function(e){return o(this.connected,"Must be connected to start writer"),this.$startWrite(),this.once("writable",e)},n.prototype.consumeInput=function(){return this.$consumeInput()},n.prototype.isBusy=function(){return this.$isBusy()},n.prototype.setNonBlocking=function(e){return this.$setNonBlocking(e?1:0)},n.prototype.isNonBlocking=function(){return this.$isNonBlocking()},n.prototype.flush=function(){return this.$flush()},n.prototype.escapeLiteral=function(e){return e?this.$escapeLiteral(e):e},n.prototype.escapeIdentifier=function(e){return e?this.$escapeIdentifier(e):e},n.prototype.notifies=function(){return this.$notifies()},n.prototype.putCopyData=function(e){return o(e instanceof Buffer),this.$putCopyData(e)},n.prototype.putCopyEnd=function(e){return e?this.$putCopyEnd(e):this.$putCopyEnd()},n.prototype.getCopyData=function(e){return this.$getCopyData(!!e)},n.prototype.cancel=function(){return this.$cancel()}}).call(this,r(330)(e),"/")},842:function(e,t,r){var n=r(843),i=r(844),s=r(817);t.getTypeParser=function(e,t){if(!o[t=t||"text"])return a;return o[t][e]||a},t.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text");o[t][e]=r},t.arrayParser=s;var o={text:{},binary:{}};function a(e){return String(e)}n.init((function(e,t){o.text[e]=t})),i.init((function(e,t){o.binary[e]=t}))},843:function(e,t,r){var n=r(816),i=r(817),s=r(806),o=r(807),a=r(808);function u(e){return function(t){return null===t?t:e(t)}}function c(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function h(e){return e?n.parse(e,c):null}function l(e){return parseInt(e,10)}function p(e){return e?n.parse(e,u(l)):null}function f(e){return e?n.parse(e,u((function(e){return w(e).trim()}))):null}var d=function(e){return e?i.create(e,(function(e){return null!==e&&(e=S(e)),e})).parse():null},m=function(e){return e?i.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e})).parse():null},y=function(e){return e?i.create(e).parse():null},g=function(e){return e?i.create(e,(function(e){return null!==e&&(e=s(e)),e})).parse():null},v=function(e){return e?n.parse(e,u(a)):null},_=function(e){return parseInt(e,10)},w=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},b=function(e){var t=y(e);return t?t.map((function(e){return JSON.parse(e)})):t},S=function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},E=function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++)n||(t+=e[i]),")"!==e[i]?n&&","!==e[i]&&(r+=e[i]):n=!0;var s=S(t);return s.radius=parseFloat(r),s};e.exports={init:function(e){e(20,w),e(21,_),e(23,_),e(26,_),e(700,parseFloat),e(701,parseFloat),e(16,c),e(1082,s),e(1114,s),e(1184,s),e(600,S),e(651,y),e(718,E),e(1e3,h),e(1001,v),e(1005,p),e(1007,p),e(1028,p),e(1016,f),e(1017,d),e(1021,m),e(1022,m),e(1231,m),e(1014,y),e(1015,y),e(1008,y),e(1009,y),e(1040,y),e(1041,y),e(1115,g),e(1182,g),e(1185,g),e(1186,o),e(17,a),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,b),e(3807,b),e(3907,y),e(2951,y),e(791,y),e(1183,y),e(1270,y)}}},844:function(e,t,r){var n=r(809),i=function(e,t,r,n,i){n=n||!1,i=i||function(e,t,r){return e*Math.pow(2,r)+t};var s=(r=r||0)>>3,o=function(e){return n?255&~e:e},a=255,u=8-r%8;t<u&&(a=255<<8-t&255,u=t),r&&(a>>=r%8);var c=0;r%8+t>=8&&(c=i(0,o(e[s])&a,u));for(var h=t+r>>3,l=s+1;l<h;l++)c=i(c,o(e[l]),8);var p=(t+r)%8;return p>0&&(c=i(c,o(e[h])>>8-p,p)),c},s=function(e,t,r){var n=Math.pow(2,r-1)-1,s=i(e,1),o=i(e,r,1);if(0===o)return 0;var a=1,u=i(e,t,r+1,!1,(function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)a/=2,(t&1<<r-n)>0&&(e+=a);return e}));return o==Math.pow(2,r+1)-1?0===u?0===s?1/0:-1/0:NaN:(0===s?1:-1)*Math.pow(2,o-n)*u},o=function(e){return 1==i(e,1)?-1*(i(e,15,1,!0)+1):i(e,15,1)},a=function(e){return 1==i(e,1)?-1*(i(e,31,1,!0)+1):i(e,31,1)},u=function(e){return s(e,23,8)},c=function(e){return s(e,52,11)},h=function(e){var t=i(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,i(e,16,16)),n=0,s=i(e,16),o=0;o<s;o++)n+=i(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,i(e,16,48));return(0===t?1:-1)*Math.round(n*a)/a},l=function(e,t){var r=i(t,1),n=i(t,63,1),s=new Date((0===r?1:-1)*n/1e3+9466848e5);return e||s.setTime(s.getTime()+6e4*s.getTimezoneOffset()),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(e){this.usec=e},s.getUTCMicroSeconds=function(){return this.usec},s},p=function(e){for(var t=i(e,32),r=(i(e,32,32),i(e,32,64)),n=96,s=[],o=0;o<t;o++)s[o]=i(e,32,n),n+=32,n+=32;var a=function(t){var r,s=i(e,32,n);return n+=32,4294967295==s?null:23==t||20==t?(r=i(e,8*s,n),n+=8*s,r):25==t?r=e.toString(this.encoding,n>>3,(n+=s<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},u=function(e,t){var r,n=[];if(e.length>1){var i=e.shift();for(r=0;r<i;r++)n[r]=u(e,t);e.unshift(i)}else for(r=0;r<e[0];r++)n[r]=a(t);return n};return u(s,r)},f=function(e){return e.toString("utf8")},d=function(e){return null===e?null:i(e,8)>0};e.exports={init:function(e){e(20,n),e(21,o),e(23,a),e(26,a),e(1700,h),e(700,u),e(701,c),e(16,d),e(1114,l.bind(null,!1)),e(1184,l.bind(null,!0)),e(1e3,p),e(1007,p),e(1016,p),e(1008,p),e(1009,p),e(25,f)}}},845:function(e,t,r){"use strict";class n{constructor(e,t){this._types=e,this._arrayMode=t,this.command=void 0,this.rowCount=void 0,this.fields=[],this.rows=[]}consumeCommand(e){this.command=e.cmdStatus().split(" ")[0],this.rowCount=parseInt(e.cmdTuples(),10)}consumeFields(e){const t=e.nfields();for(var r=0;r<t;r++)this.fields.push({name:e.fname(r),dataTypeID:e.ftype(r)})}consumeRows(e){const t=e.ntuples();for(var r=0;r<t;r++){const t=this._arrayMode?this.consumeRowAsArray(e,r):this.consumeRowAsObject(e,r);this.rows.push(t)}}consumeRowAsObject(e,t){const r={};for(var n=0;n<this.fields.length;n++){const i=this.readValue(e,t,n);r[this.fields[n].name]=i}return r}consumeRowAsArray(e,t){const r=[];for(var n=0;n<this.fields.length;n++){const i=this.readValue(e,t,n);r.push(i)}return r}readValue(e,t,r){var n=e.getvalue(t,r);if(""===n&&e.getisnull(t,r))return null;const i=this.fields[r].dataTypeID;return this._types.getTypeParser(i)(n)}}e.exports=function(e,t,r){const i=new n(t,r);return i.consumeCommand(e),i.consumeFields(e),i.consumeRows(e),i}},846:function(e,t,r){var n=r(34).Duplex,i=r(34).Writable,s=r(5),o=e.exports=function(e,t){n.call(this,t),this.pq=e,this._reading=!1};s.inherits(o,n),o.prototype._write=function(e,t,r){var n=this.pq.putCopyData(e);if(1===n)return r();if(-1===n)return r(new Error(this.pq.errorMessage()));var i=this;this.pq.writable((function(){i._write(e,t,r)}))},o.prototype.end=function(){var e=Array.prototype.slice.call(arguments,0),t=this,r=e.pop();e.length&&this.write(e[0]);var n=this.pq.putCopyEnd();if(1===n)return a(this.pq,(function(e,n){i.prototype.end.call(t),r&&r(e)}));if(-1===n){var s=new Error(this.pq.errorMessage());return this.emit("error",s)}return this.pq.writable((function(){return t.end.apply(t,r)}))},o.prototype._consumeBuffer=function(e){var t=this.pq.getCopyData(!0);if(t instanceof Buffer)return setImmediate((function(){e(null,t)}));if(-1===t)return e(null,null);if(0===t){var r=this;return this.pq.once("readable",(function(){r.pq.stopReader(),r.pq.consumeInput(),r._consumeBuffer(e)})),this.pq.startReader()}e(new Error("Unrecognized read status: "+t))},o.prototype._read=function(e){if(!this._reading){this._reading=!0;var t=this;this._consumeBuffer((function(e,r){if(t._reading=!1,e)return t.emit("error",e);!1!==r&&t.push(r)}))}};var a=function(e,t){var r=function(){e.removeListener("readable",i),e.stopReader()},n=function(n){return r(),t(new Error(n||e.errorMessage()))},i=function(){return e.consumeInput()?e.isBusy()?void 0:(e.getResult(),e.getResult()&&"PGRES_COPY_OUT"!==e.resultStatus()?n("Only one result at a time is accepted"):"PGRES_FATAL_ERROR"===e.resultStatus()?n():(r(),t(null))):n()};e.on("readable",i),e.startReader()}},847:function(e){e.exports=JSON.parse('{"_from":"pg-native@^2.2.0","_id":"pg-native@2.2.0","_inBundle":false,"_integrity":"sha1-vIR1b07L9gD/fLSOpYVBQYMM8eQ=","_location":"/pg-native","_phantomChildren":{"core-util-is":"1.0.2","inherits":"2.0.4","pg-int8":"1.0.1","postgres-bytea":"1.0.0","postgres-date":"1.0.4","postgres-interval":"1.2.0"},"_requested":{"type":"range","registry":true,"raw":"pg-native@^2.2.0","name":"pg-native","escapedName":"pg-native","rawSpec":"^2.2.0","saveSpec":null,"fetchSpec":"^2.2.0"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/pg-native/-/pg-native-2.2.0.tgz","_shasum":"bc84756f4ecbf600ff7cb48ea5854141830cf1e4","_spec":"pg-native@^2.2.0","_where":"/Users/ndoiron404/Documents/districtr","author":{"name":"Brian M. Carlson"},"bugs":{"url":"https://github.com/brianc/node-pg-native/issues"},"bundleDependencies":false,"dependencies":{"libpq":"^1.7.0","pg-types":"^1.12.1","readable-stream":"1.0.31"},"deprecated":false,"description":"A slightly nicer interface to Postgres over node-libpq","devDependencies":{"async":"^0.9.0","concat-stream":"^1.4.6","eslint":"4.2.0","eslint-config-standard":"10.2.1","eslint-plugin-import":"2.7.0","eslint-plugin-node":"5.1.0","eslint-plugin-promise":"3.5.0","eslint-plugin-standard":"3.0.1","generic-pool":"^2.1.1","lodash":"^2.4.1","mocha":"3.4.2","okay":"^0.3.0","pg":"*","semver":"^4.1.0"},"homepage":"https://github.com/brianc/node-pg-native","keywords":["postgres","pg","libpq"],"license":"MIT","main":"index.js","name":"pg-native","repository":{"type":"git","url":"git://github.com/brianc/node-pg-native.git"},"scripts":{"test":"mocha && eslint ."},"version":"2.2.0"}')},848:function(e,t,r){var n,i,s;e.exports===t&&(t=e.exports=H),s="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],u=t.src=[],c=0,h=c++;u[h]="0|[1-9]\\d*";var l=c++;u[l]="[0-9]+";var p=c++;u[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;u[f]="("+u[h]+")\\.("+u[h]+")\\.("+u[h]+")";var d=c++;u[d]="("+u[l]+")\\.("+u[l]+")\\.("+u[l]+")";var m=c++;u[m]="(?:"+u[h]+"|"+u[p]+")";var y=c++;u[y]="(?:"+u[l]+"|"+u[p]+")";var g=c++;u[g]="(?:-("+u[m]+"(?:\\."+u[m]+")*))";var v=c++;u[v]="(?:-?("+u[y]+"(?:\\."+u[y]+")*))";var _=c++;u[_]="[0-9A-Za-z-]+";var w=c++;u[w]="(?:\\+("+u[_]+"(?:\\."+u[_]+")*))";var b=c++,S="v?"+u[f]+u[g]+"?"+u[w]+"?";u[b]="^"+S+"$";var E="[v=\\s]*"+u[d]+u[v]+"?"+u[w]+"?",C=c++;u[C]="^"+E+"$";var x=c++;u[x]="((?:<|>)?=?)";var k=c++;u[k]=u[l]+"|x|X|\\*";var P=c++;u[P]=u[h]+"|x|X|\\*";var I=c++;u[I]="[v=\\s]*("+u[P]+")(?:\\.("+u[P]+")(?:\\.("+u[P]+")(?:"+u[g]+")?"+u[w]+"?)?)?";var T=c++;u[T]="[v=\\s]*("+u[k]+")(?:\\.("+u[k]+")(?:\\.("+u[k]+")(?:"+u[v]+")?"+u[w]+"?)?)?";var R=c++;u[R]="^"+u[x]+"\\s*"+u[I]+"$";var M=c++;u[M]="^"+u[x]+"\\s*"+u[T]+"$";var q=c++;u[q]="(?:~>?)";var A=c++;u[A]="(\\s*)"+u[q]+"\\s+",a[A]=new RegExp(u[A],"g");var Q=c++;u[Q]="^"+u[q]+u[I]+"$";var O=c++;u[O]="^"+u[q]+u[T]+"$";var D=c++;u[D]="(?:\\^)";var L=c++;u[L]="(\\s*)"+u[D]+"\\s+",a[L]=new RegExp(u[L],"g");var N=c++;u[N]="^"+u[D]+u[I]+"$";var B=c++;u[B]="^"+u[D]+u[T]+"$";var F=c++;u[F]="^"+u[x]+"\\s*("+E+")$|^$";var j=c++;u[j]="^"+u[x]+"\\s*("+S+")$|^$";var G=c++;u[G]="(\\s*)"+u[x]+"\\s*("+E+"|"+u[I]+")",a[G]=new RegExp(u[G],"g");var $=c++;u[$]="^\\s*("+u[I]+")\\s+-\\s+("+u[I]+")\\s*$";var U=c++;u[U]="^\\s*("+u[T]+")\\s+-\\s+("+u[T]+")\\s*$";var z=c++;u[z]="(<|>)?=?\\s*\\*";for(var V=0;V<34;V++)s(V,u[V]),a[V]||(a[V]=new RegExp(u[V]));function Y(e,t){if(e.length>256)return null;if(!(t?a[C]:a[b]).test(e))return null;try{return new H(e,t)}catch(e){return null}}function H(e,t){if(e instanceof H){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof H))return new H(e,t);s("SemVer",e,t),this.loose=t;var r=e.trim().match(t?a[C]:a[b]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(e){return/^[0-9]+$/.test(e)?+e:e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}t.parse=Y,t.valid=function(e,t){var r=Y(e,t);return r?r.version:null},t.clean=function(e,t){var r=Y(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=H,H.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},H.prototype.inspect=function(){return'<SemVer "'+this+'">'},H.prototype.toString=function(){return this.version},H.prototype.compare=function(e){return s("SemVer.compare",this.version,this.loose,e),e instanceof H||(e=new H(e,this.loose)),this.compareMain(e)||this.comparePre(e)},H.prototype.compareMain=function(e){return e instanceof H||(e=new H(e,this.loose)),J(this.major,e.major)||J(this.minor,e.minor)||J(this.patch,e.patch)},H.prototype.comparePre=function(e){if(e instanceof H||(e=new H(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(s("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return J(r,n)}while(++t)},H.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new H(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(te(e,t))return null;var r=Y(e),n=Y(t);if(r.prerelease.length||n.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return i},t.compareIdentifiers=J;var K=/^[0-9]+$/;function J(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function W(e,t,r){return new H(e,r).compare(t)}function Z(e,t,r){return W(t,e,r)}function X(e,t,r){return W(e,t,r)>0}function ee(e,t,r){return W(e,t,r)<0}function te(e,t,r){return 0===W(e,t,r)}function re(e,t,r){return 0!==W(e,t,r)}function ne(e,t,r){return W(e,t,r)>=0}function ie(e,t,r){return W(e,t,r)<=0}function se(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=te(e,r,n);break;case"!=":i=re(e,r,n);break;case">":i=X(e,r,n);break;case">=":i=ne(e,r,n);break;case"<":i=ee(e,r,n);break;case"<=":i=ie(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function oe(e,t){if(e instanceof oe){if(e.loose===t)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);s("comparator",e,t),this.loose=t,this.parse(e),this.semver===ae?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(e,t){return J(t,e)},t.major=function(e,t){return new H(e,t).major},t.minor=function(e,t){return new H(e,t).minor},t.patch=function(e,t){return new H(e,t).patch},t.compare=W,t.compareLoose=function(e,t){return W(e,t,!0)},t.rcompare=Z,t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=X,t.lt=ee,t.eq=te,t.neq=re,t.gte=ne,t.lte=ie,t.cmp=se,t.Comparator=oe;var ae={};function ue(e,t){if(e instanceof ue&&e.loose===t)return e;if(!(this instanceof ue))return new ue(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ce(e){return!e||"x"===e.toLowerCase()||"*"===e}function he(e,t,r,n,i,s,o,a,u,c,h,l,p){return((t=ce(r)?"":ce(n)?">="+r+".0.0":ce(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ce(u)?"":ce(c)?"<"+(+u+1)+".0.0":ce(h)?"<"+u+"."+(+c+1)+".0":l?"<="+u+"."+c+"."+h+"-"+l:"<="+a)).trim()}function le(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++){if(s(e[r].semver),e[r].semver===ae)return!0;if(e[r].semver.prerelease.length>0){var n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}}return!1}return!0}function pe(e,t,r){try{t=new ue(t,r)}catch(e){return!1}return t.test(e)}function fe(e,t,r,n){var i,s,o,a,u;switch(e=new H(e,n),t=new ue(t,n),r){case">":i=X,s=ie,o=ee,a=">",u=">=";break;case"<":i=ee,s=ne,o=X,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var h=t.set[c],l=null,p=null;if(h.forEach((function(e){l=l||e,p=p||e,i(e.semver,l.semver,n)?l=e:o(e.semver,p.semver,n)&&(p=e)})),l.operator===a||l.operator===u)return!1;if((!p.operator||p.operator===a)&&s(e,p.semver))return!1;if(p.operator===u&&o(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.loose?a[F]:a[j],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new H(r[2],this.loose):this.semver=ae},oe.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return s("Comparator.test",e,this.loose),this.semver===ae||("string"==typeof e&&(e=new H(e,this.loose)),se(e,this.operator,this.semver,this.loose))},t.Range=ue,ue.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'},ue.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ue.prototype.toString=function(){return this.range},ue.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),s("range",e,t);var r=t?a[U]:a[$];e=e.replace(r,he),s("hyphen replace",e),e=e.replace(a[G],"$1$2$3"),s("comparator trim",e,a[G]),e=(e=(e=e.replace(a[A],"$1~")).replace(a[L],"$1^")).split(/\s+/).join(" ");var n=t?a[F]:a[j],i=e.split(" ").map((function(e){return function(e,t){return s("comp",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){s("caret",e,t);var r=t?a[B]:a[N];return e.replace(r,(function(t,r,n,i,o){var a;return s("caret",e,t,r,n,i,o),ce(r)?a="":ce(n)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ce(i)?a="0"===r?">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":">="+r+"."+n+".0 <"+(+r+1)+".0.0":o?(s("replaceCaret pr",o),"-"!==o.charAt(0)&&(o="-"+o),a="0"===r?"0"===n?">="+r+"."+n+"."+i+o+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+o+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+o+" <"+(+r+1)+".0.0"):(s("no pr"),a="0"===r?"0"===n?">="+r+"."+n+"."+i+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+" <"+(+r+1)+".0.0"),s("caret return",a),a}))}(e,t)})).join(" ")}(e,t),s("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t?a[O]:a[Q];return e.replace(r,(function(t,r,n,i,o){var a;return s("tilde",e,t,r,n,i,o),ce(r)?a="":ce(n)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ce(i)?a=">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":o?(s("replaceTilde pr",o),"-"!==o.charAt(0)&&(o="-"+o),a=">="+r+"."+n+"."+i+o+" <"+r+"."+(+n+1)+".0"):a=">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0",s("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),s("tildes",e),e=function(e,t){return s("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t?a[M]:a[R];return e.replace(r,(function(t,r,n,i,o,a){s("xRange",e,t,r,n,i,o,a);var u=ce(n),c=u||ce(i),h=c||ce(o);return"="===r&&h&&(r=""),u?t=">"===r||"<"===r?"<0.0.0":"*":r&&h?(c&&(i=0),h&&(o=0),">"===r?(r=">=",c?(n=+n+1,i=0,o=0):h&&(i=+i+1,o=0)):"<="===r&&(r="<",c?n=+n+1:i=+i+1),t=r+n+"."+i+"."+o):c?t=">="+n+".0.0 <"+(+n+1)+".0.0":h&&(t=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0"),s("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),s("xrange",e),e=function(e,t){return s("replaceStars",e,t),e.trim().replace(a[z],"")}(e,t),s("stars",e),e}(e,t)})).join(" ").split(/\s+/);return this.loose&&(i=i.filter((function(e){return!!e.match(n)}))),i=i.map((function(e){return new oe(e,t)}))},t.toComparators=function(e,t){return new ue(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ue.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new H(e,this.loose));for(var t=0;t<this.set.length;t++)if(le(this.set[t],e))return!0;return!1},t.satisfies=pe,t.maxSatisfying=function(e,t,r){return e.filter((function(e){return pe(e,t,r)})).sort((function(e,t){return Z(e,t,r)}))[0]||null},t.validRange=function(e,t){try{return new ue(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return fe(e,t,"<",r)},t.gtr=function(e,t,r){return fe(e,t,">",r)},t.outside=fe,void 0===(i="function"==typeof(n=t)?n.call(t,r,t,e):n)||(e.exports=i)},849:function(e){e.exports=JSON.parse('{"_from":"pg@^7.18.1","_id":"pg@7.18.2","_inBundle":false,"_integrity":"sha512-Mvt0dGYMwvEADNKy5PMQGlzPudKcKKzJds/VbOeZJpb6f/pI3mmoXX0JksPgI3l3JPP/2Apq7F36O63J7mgveA==","_location":"/pg","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"pg@^7.18.1","name":"pg","escapedName":"pg","rawSpec":"^7.18.1","saveSpec":null,"fetchSpec":"^7.18.1"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/pg/-/pg-7.18.2.tgz","_shasum":"4e219f05a00aff4db6aab1ba02f28ffa4513b0bb","_spec":"pg@^7.18.1","_where":"/Users/ndoiron404/Documents/districtr","author":{"name":"Brian Carlson","email":"brian.m.carlson@gmail.com"},"bugs":{"url":"https://github.com/brianc/node-postgres/issues"},"bundleDependencies":false,"dependencies":{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"0.1.3","pg-packet-stream":"^1.1.0","pg-pool":"^2.0.10","pg-types":"^2.1.0","pgpass":"1.x","semver":"4.3.2"},"deprecated":false,"description":"PostgreSQL client - pure javascript & libpq with the same API","devDependencies":{"async":"0.9.0","bluebird":"3.5.2","co":"4.6.0","eslint":"^6.0.1","eslint-config-standard":"^13.0.1","eslint-plugin-import":"^2.18.1","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.0","pg-copy-streams":"0.3.0"},"engines":{"node":">= 4.5.0"},"files":["lib","SPONSORS.md"],"gitHead":"29877530c6f7b5ebc0bf814e3a711b4b66e4d51a","homepage":"https://github.com/brianc/node-postgres","keywords":["database","libpq","pg","postgre","postgres","postgresql","rdbms"],"license":"MIT","main":"./lib","minNativeVersion":"2.0.0","name":"pg","repository":{"type":"git","url":"git://github.com/brianc/node-postgres.git"},"scripts":{"lint":"make lint","test":"make test-all"},"version":"7.18.2"}')},850:function(e,t,r){"use strict";var n=r(8).EventEmitter,i=r(5),s=r(801),o=e.exports=function(e,t,r){n.call(this),e=s.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",function(e){"row"===e&&(this._emitRowEvents=!0)}.bind(this))};i.inherits(o,n);var a={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};o.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var r in t){e[a[r]||r]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"},o.prototype.then=function(e,t){return this._getPromise().then(e,t)},o.prototype.catch=function(e){return this._getPromise().catch(e)},o.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)},o.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var r=function(r,n,i){if(e.native.arrayMode=!1,setImmediate((function(){t.emit("_done")})),r)return t.handleError(r);t._emitRowEvents&&(i.length>1?n.forEach((e,r)=>{e.forEach(e=>{t.emit("row",e,i[r])})}):n.forEach((function(e){t.emit("row",e,i)}))),t.state="end",t.emit("end",i),t.callback&&t.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var n=(this.values||[]).map(s.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){const e=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(e)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,(function(i){return i?r(i):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))}))}if(this.values){if(!Array.isArray(this.values)){const e=new Error("Query values must be an array");return r(e)}var i=this.values.map(s.prepareValue);e.native.query(this.text,i,r)}else e.native.query(this.text,r)}}}));