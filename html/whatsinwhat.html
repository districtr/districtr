<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>What's Where | Districtr</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="/css/landing_page.css" /> -->
    <link rel="stylesheet" type="text/css" href="/css/state_landing.css" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <meta property="og:title" content="Districtr" />
    <meta name="author" content="MGGG Redistricting Lab" />
    <meta property="og:locale" content="en_US" />
    <meta name="description" content="The open web app for drawing districting plans." />
    <meta property="og:description" content="The open web app for drawing districting plans." />
    <link rel="canonical" href="https://districtr.org" />
    <meta property="og:url" content="https://districtr.org" />
    <meta property="og:site_name" content="Districtr" />
    <style type="text/css">
    .heading {
        background: #fff;
        display: block;
        color: #444;
        padding-top: 0;
        margin-top: -35px;
        font-size: 150%;
    }

    .splash-text {
        text-align: center;
        color: #0099cd;
    }

    .l-major-section {
        padding-bottom: 1rem;
    }

    .l-major-section h3 {
        color: darkblue;
    }

    .l-major-section p {
        font-size: 20px;
    }

    .col1,
    .col2 {
        display: inline-block;
        margin: 0;
        padding: 0;
        vertical-align: top;
    }

    .col1 {
        width: 70%;
    }

    .col2 {
        width: 28%;
        text-align: right;
    }

    .col2 img {
        width: 70%;
    }

    @media (min-width:1000px) {
        .l-major-section {
            margin-left: 10%;
            margin-right: 10%;
        }

        .col1 {
            width: 71%;
        }

        .col2 {
            width: 28%;
        }
    }

    #nav-links {
        justify-content: flex-end;
    }

    a.bookmark {
        position: relative;
        top: -30px;
    }

    strong {
        font-size: 109%;
    }

    ul li.module::marker {
        content: '\1F5FA \  ';
    }

    ul li.feature::marker {
        content: '\1F4BB \  ';
    }

    ul li.design::marker {
        content: '\1F4A5 \  ';
    }

    ul li.activity::marker {
        content: '\1F46A \  ';
    }
    </style>
    <style type="text/css">
        #whatsinwhat-state {
            overflow-x: scroll;
        }
        #whatsinwhat-other {
            overflow-x: scroll;
        }
    </style>
</head>

<body>
    <header class="site-header">
        <nav class="site-nav">
            <div class="site-nav__logo">
                <a href="/">
                    <img class="site-nav__logo__img" src="/assets/districtr-splash-clear.png" alt="Home" />
                </a>
            </div>
            <ul id="nav-links" class="nav-links site-nav__contents">
                <li class="nav">
                    <a href="/new">
                        <img class="site-nav__logo__img" src="/assets/usa_light_blue.png" alt="Back to Map" />
                    </a>
                </li>
            </ul>
        </nav>
        <nav class="site-nav" id="local-nav">
            <a href="#state">Jump to States</a>
            <a href="#other">Jump to Cities and counties</a>
        </nav>
    </header>
    <main id="root" class="landing-page">
        <br />
        <br />
        <br />
        <section>
            <header class="splash-text">
                <br />
                <br />
                <h2 class="heading">
                    What's in What Module?
                </h2>
            </header>
        </section>
        <section class="l-content l-major-section" id="state"> 
            <br />
            <br />
            <br />
            <h3 class="heading">State Modules</h3>
            <div id="whatsinwhat-state"></div>
        </section>
        <section class="l-content l-major-section" id="other"> 
            <br />
            <br />
            <br />
            <h3 class="heading">Other Modules (counties and cities)</h3>
            <div id="whatsinwhat-other"></div>
        </section>
    </main>
    <script src="/es6/index.js"></script>
    <script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
    <script>
    if (Object.assign === undefined || fetch === undefined) {
        document.write(
            '<script src="https://polyfill.io/v3/polyfill.min.js?features=default,es5,es6,es7,fetch"><\/script>'
        );
        document.write(
            '<script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.7/webcomponents-loader.js"><\/script>'
        );
        document.write('<script src="/es5/index.js"><\/script>');
        document.write("<script>ieBundle();<\/script>");
    } else {
        bundle();
    }
    </script>
    <script>
        var state = document.getElementById("whatsinwhat-state");
        fetch('whatsinwhat_states.html', {method: 'GET'})
        .then(response => response.text())
        .then(data => {
            state.innerHTML = data;
            /*
            const table = document.querySelector('table');
            table.querySelectorAll('th') // get all the table header elements
            .forEach((element, columnNo) => { // add a click handler for each 
                element.addEventListener('click', event => {
                    sortTable(table, columnNo); //call a function which sorts the table by a given column number
                })
            })
            */
        });

        var other = document.getElementById("whatsinwhat-other");
        fetch('whatsinwhat_other.html', {method: 'GET'})
        .then(response => response.text())
        .then(data => {
            other.innerHTML = data;
        });
        /*
        // adapted from : https://stackoverflow.com/questions/10683712/html-table-sort
        function sortTable(table, sortColumn){
            // get the data from the table cells
            const tableBody = elt.querySelector('tbody')
            const tableData = table2data(tableBody);
            // sort the extracted data
            tableData.sort((a, b)=>{
                if(a[sortColumn] > b[sortColumn]){
                return 1;
                }
                return -1;
            })
            // put the sorted data back into the table
            data2table(tableBody, tableData);
        }

        // this function gets data from the rows and cells 
        // within an html tbody element
        function table2data(tableBody){
        const tableData = []; // create the array that'll hold the data rows
        tableBody.querySelectorAll('tr')
            .forEach(row=>{  // for each table row...
            const rowData = [];  // make an array for that row
            row.querySelectorAll('td')  // for each cell in that row
                .forEach(cell=>{
                rowData.push(cell.innerText);  // add it to the row data
                })
            tableData.push(rowData);  // add the full row to the table data 
            });
        return tableData;
        }

        // this function puts data into an html tbody element
        function data2table(tableBody, tableData){
        tableBody.querySelectorAll('tr') // for each table row...
            .forEach((row, i)=>{  
            const rowData = tableData[i]; // get the array for the row data
            row.querySelectorAll('td')  // for each table cell ...
                .forEach((cell, j)=>{
                cell.innerText = rowData[j]; // put the appropriate array element into the cell
                })
            tableData.push(rowData);
            });
        }
        */
    </script>
</body>

</html>